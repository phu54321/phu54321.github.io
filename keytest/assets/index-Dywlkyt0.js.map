{"version":3,"file":"index-Dywlkyt0.js","sources":["../../node_modules/quickselect/index.js","../../src/audioCanvasRenderer.ts","../../src/keyboardRender.ts","../../src/keypress.ts","../../src/micRecorder.ts","../../src/index.ts"],"sourcesContent":["\n/**\n * Rearranges items so that all items in the [left, k] are the smallest.\n * The k-th element will have the (k - left + 1)-th smallest value in [left, right].\n *\n * @template T\n * @param {T[]} arr the array to partially sort (in place)\n * @param {number} k middle index for partial sorting (as defined above)\n * @param {number} [left=0] left index of the range to sort\n * @param {number} [right=arr.length-1] right index\n * @param {(a: T, b: T) => number} [compare = (a, b) => a - b] compare function\n */\nexport default function quickselect(arr, k, left = 0, right = arr.length - 1, compare = defaultCompare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            const n = right - left + 1;\n            const m = k - left + 1;\n            const z = Math.log(n);\n            const s = 0.5 * Math.exp(2 * z / 3);\n            const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselect(arr, k, newLeft, newRight, compare);\n        }\n\n        const t = arr[k];\n        let i = left;\n        /** @type {number} */\n        let j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\n/**\n * @template T\n * @param {T[]} arr\n * @param {number} i\n * @param {number} j\n */\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\n/**\n * @template T\n * @param {T} a\n * @param {T} b\n * @returns {number}\n */\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","import quickselect from 'quickselect'\r\n\r\nlet mainCanvas: HTMLCanvasElement | null = null\r\n\r\nfunction renderAudioformToCanvas (array: number[]) {\r\n  if (mainCanvas === null) return\r\n\r\n  const { scrollWidth: width, scrollHeight: height } = mainCanvas\r\n  if (mainCanvas.width !== width || mainCanvas.height !== height) {\r\n    mainCanvas.width = width\r\n    mainCanvas.height = height\r\n  }\r\n\r\n  const ctx = mainCanvas.getContext('2d')!\r\n\r\n  const imageData = ctx.createImageData(width, height)\r\n  imageData.data.fill(0xff)\r\n  const length = array.length\r\n\r\n  for (let x = 0; x < width; x++) {\r\n    const startIndex = x * length / width | 0\r\n    const endIndex = (x + 1) * length / width | 0\r\n    const intervalSamples = array.slice(startIndex, endIndex)\r\n\r\n    let maxSample = -1\r\n    let minSample = 1\r\n    for (const sample of intervalSamples) {\r\n      if (maxSample < sample) maxSample = sample\r\n      if (minSample > sample) minSample = sample\r\n    }\r\n    const intervalLength = intervalSamples.length\r\n    const q1Index = intervalLength * 1 / 4 | 0\r\n    quickselect(intervalSamples, q1Index)\r\n    const q1Sample = intervalSamples[q1Index]\r\n\r\n    const q3Index = intervalLength * 3 / 4 | 0\r\n    quickselect(intervalSamples, q3Index)\r\n    const q3Sample = intervalSamples[q3Index]\r\n\r\n    // maxSample = 1 → y = 0, minSample = -1 → y = height - 1\r\n    const maxSampleY = ((1 - (maxSample + 1) / 2.0) * (height - 1) + 0.5) | 0\r\n    const minSampleY = ((1 - (minSample + 1) / 2.0) * (height - 1) + 0.5) | 0\r\n    for (let iy = maxSampleY; iy <= minSampleY; iy++) {\r\n      const index = (iy * width + x) * 4\r\n      imageData.data[index + 0] = 160\r\n      imageData.data[index + 1] = 160\r\n      imageData.data[index + 2] = 160\r\n    }\r\n\r\n    const q3SampleY = ((1 - (q3Sample + 1) / 2.0) * (height - 1) + 0.5) | 0\r\n    const q1SampleY = ((1 - (q1Sample + 1) / 2.0) * (height - 1) + 0.5) | 0\r\n    for (let iy = q3SampleY; iy <= q1SampleY; iy++) {\r\n      const index = (iy * width + x) * 4\r\n      imageData.data[index + 0] = 96\r\n      imageData.data[index + 1] = 96\r\n      imageData.data[index + 2] = 96\r\n    }\r\n  }\r\n\r\n  ctx.putImageData(imageData, 0, 0)\r\n}\r\n\r\nlet startTime = 0\r\nlet sampleRate = 0\r\nlet audioAdjustment = 0\r\nconst samples = [] as number[]\r\nconst gcSampleSec = 10\r\nconst maxMoveTime = 0.01\r\n\r\nfunction adjustAudioTiming (e: MouseEvent) {\r\n  const targetEl = e.target as HTMLDivElement\r\n  const rect = targetEl.getBoundingClientRect()\r\n  const y = e.clientY - rect.top\r\n  const moveTime = y / (rect.bottom - rect.top) * maxMoveTime\r\n  if (targetEl.id === 'mic-audio-adjustment-left') audioAdjustment -= moveTime\r\n  if (targetEl.id === 'mic-audio-adjustment-right') audioAdjustment += moveTime\r\n}\r\n\r\nconst showTooltips = false\r\n\r\nexport function audioVisualizerInitCanvas (newSampleRate: number) {\r\n  const micAudioZoneEl = document.getElementById('mic-audio-zone')! as HTMLDivElement\r\n  micAudioZoneEl.innerHTML = `\r\n  <canvas id=\"mic-audio-canvas\"></canvas>\r\n  <svg id='cursor-position-overlay' viewBox=\"0 0 0.13 1\" preserveaspectratio=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n    <line class=\"vertical-line hidden\" y0=0 y1=1 />\r\n  </svg>\r\n  <span id='cursor-position-overlay-text'></span>\r\n  <div id='mic-audio-adjustment-left'>◀<br><br><br>◀◀</div>\r\n  <div id='mic-audio-adjustment-right'>▶<br><br><br>▶▶</div>\r\n  `\r\n\r\n  startTime = performance.now() / 1000\r\n  sampleRate = newSampleRate\r\n  document.getElementById('mic-audio-adjustment-left')?.addEventListener('click', adjustAudioTiming)\r\n  document.getElementById('mic-audio-adjustment-right')?.addEventListener('click', adjustAudioTiming)\r\n\r\n  mainCanvas = document.getElementById('mic-audio-canvas') as HTMLCanvasElement\r\n  const overlaySVG = document.getElementById('cursor-position-overlay') as HTMLElement\r\n  const cursorTextSpan = document.getElementById('cursor-position-overlay-text') as HTMLSpanElement\r\n\r\n  overlaySVG.addEventListener('mousemove', (e) => {\r\n    const rect = overlaySVG!.getBoundingClientRect()\r\n    const x = (e.clientX - rect.left)\r\n    const time = (x / (rect.right - rect.left)) * 0.13 - 0.1\r\n\r\n    const verticalLine = overlaySVG!.getElementsByClassName('vertical-line')[0] as SVGLineElement\r\n    verticalLine.setAttribute('x1', (time + 0.1).toString())\r\n    verticalLine.setAttribute('x2', (time + 0.1).toString())\r\n\r\n    cursorTextSpan.innerHTML = `${(time * 1000).toFixed(1)}ms`\r\n  })\r\n\r\n  // modify rt-bar viewbox\r\n  // TODO: this might NOT be an appropriate place to put this code. Maybe refactor later?\r\n  const rtBar = document.getElementById('rt-bar')!\r\n  rtBar.setAttribute('viewBox', '0 0 1.3 1')\r\n}\r\n\r\nexport function audioVisualizerPushSamples (newSamples: Float32Array) {\r\n  samples.push(...newSamples)\r\n\r\n  if (samples.length > (gcSampleSec * 2) * sampleRate) {\r\n    startTime += gcSampleSec\r\n    samples.splice(0, gcSampleSec * sampleRate)\r\n  }\r\n}\r\n\r\nlet pendingTimeout: number | null = null\r\n\r\nexport function audioVisualizerRenderCanvas (referenceTime: number) {\r\n  if (pendingTimeout !== null) {\r\n    clearTimeout(pendingTimeout)\r\n    pendingTimeout = null\r\n  }\r\n  renderCanvas(referenceTime)\r\n}\r\n\r\nfunction renderCanvas (referenceTime: number) {\r\n  if (mainCanvas === null) return\r\n\r\n  pendingTimeout = null\r\n\r\n  const referenceIndex = ((referenceTime - audioAdjustment - startTime) * sampleRate) | 0\r\n  const dataBeginIndex = (referenceIndex - 0.1 * sampleRate) | 0\r\n  const dataEndIndex = (referenceIndex + 0.03 * sampleRate) | 0\r\n  const renderOutput = new Array<number>(dataEndIndex - dataBeginIndex)\r\n  renderOutput.fill(0)\r\n  for (let i = dataBeginIndex; i < dataEndIndex; i++) {\r\n    renderOutput[i - dataBeginIndex] = (i < 0 || i >= samples.length) ? 0 : samples[i]\r\n  }\r\n\r\n  renderAudioformToCanvas(renderOutput)\r\n\r\n  if (dataEndIndex >= samples.length) {\r\n    pendingTimeout = setTimeout(() => audioVisualizerRenderCanvas(referenceTime), 100)\r\n  }\r\n}\r\n","import { audioVisualizerRenderCanvas } from './audioCanvasRenderer'\r\nimport { events, keyLastEventTypeMap } from './keypress'\r\n\r\n// https://stackoverflow.com/questions/24004791/what-is-the-debounce-function-in-javascript\r\nlet itemChanged = 2 // Issue initial update\r\nlet lastUpdatedItemIndex = -1\r\n\r\nconst renderBarTimeWidth = 0.1\r\nconst markWidth = 0.002\r\nconst logWidth = 0.004\r\n\r\nexport function issueItemChange () {\r\n  itemChanged = 2\r\n}\r\n\r\nfunction renderKeyPressBar () {\r\n  const pathSVGs = []\r\n  const markAreaHeight = 1\r\n\r\n  // Draw scale\r\n  pathSVGs.push('<g>')\r\n  for (let i = 0; i <= 100; i++) {\r\n    const t = i / 100.0\r\n    const markHeight = markAreaHeight * (\r\n      (i % 10 === 0)\r\n        ? 1\r\n        : (i % 5 === 0)\r\n            ? 0.7\r\n            : 0.3\r\n    )\r\n\r\n    pathSVGs.push(`\r\n    <path class=\"event-bar-mark\" d=\"M${t - markWidth / 2} ${markAreaHeight - markHeight} h${markWidth} V${markHeight} h-${markWidth} Z\">\r\n      <title>${t.toFixed(2)}s</title>\r\n    </path>`)\r\n  }\r\n  pathSVGs.push('</g>')\r\n\r\n  // Draw bars\r\n  if (events.length > 0) {\r\n    pathSVGs.push('<g>')\r\n    const lastEventTime = events[events.length - 1].now\r\n    for (const ev of events) {\r\n      const eventElapsedTime = lastEventTime - ev.now\r\n      if (eventElapsedTime >= renderBarTimeWidth) {\r\n        continue\r\n      }\r\n      const x = 1 - eventElapsedTime / renderBarTimeWidth\r\n      pathSVGs.push(`\r\n      <path class=\"event-bar-log-${ev.type} event-bar-log\"\r\n        d=\"M${x} 0 l${-logWidth / 2} 0.5 l${logWidth / 2} 0.5 l${logWidth / 2} -0.5 Z\"\r\n      >\r\n        <title>${ev.code} ${ev.type} ${eventElapsedTime.toFixed(3)}s</title>\r\n      </path>`)\r\n    }\r\n    pathSVGs.push('</g>')\r\n\r\n    audioVisualizerRenderCanvas(lastEventTime)\r\n  }\r\n\r\n  document.querySelector('#keypress-graph .timing-lower')!.innerHTML = `-${renderBarTimeWidth}s`\r\n  document.getElementById('rt-bar')!.innerHTML = pathSVGs.join('')\r\n}\r\n\r\nfunction renderKeyboardEventList () {\r\n  if (!itemChanged) return\r\n  if (itemChanged) {\r\n    itemChanged--\r\n    if (itemChanged !== 0) return\r\n  }\r\n\r\n  const eventTableElement = document.getElementById('eventTable')!\r\n\r\n  for (const el of document.getElementsByClassName('btn') as HTMLCollectionOf<HTMLDivElement>) {\r\n    const keycode = el.dataset.keycode!\r\n    el.classList.remove('event-keydown')\r\n    el.classList.remove('event-keyup')\r\n    if (keyLastEventTypeMap[keycode]) {\r\n      el.classList.add(`event-${keyLastEventTypeMap[keycode]}`)\r\n    }\r\n  }\r\n\r\n  if (events.length > 0) {\r\n    const firstEventTime = events[0].now\r\n\r\n    for (let i = lastUpdatedItemIndex + 1; i < events.length; i++) {\r\n      const ev = events[i]\r\n      const time = ev.now - firstEventTime\r\n      const delta = (i === 0) ? null : ev.now - events[i - 1].now\r\n\r\n      const trElement = document.createElement('tr')\r\n      const td0 = document.createElement('td')\r\n      td0.innerText = `${ev.type}`\r\n      const td1 = document.createElement('td')\r\n      td1.innerText = `${ev.code}`\r\n      const td2 = document.createElement('td')\r\n      td2.innerText = `${(time * 1000).toFixed(2)}`\r\n      const td3 = document.createElement('td')\r\n      if (delta !== null) {\r\n        td3.innerText = `${(delta * 1000).toFixed(2)}`\r\n      }\r\n\r\n      trElement.appendChild(td0)\r\n      trElement.appendChild(td1)\r\n      trElement.appendChild(td2)\r\n      trElement.appendChild(td3)\r\n      trElement.classList.add('item')\r\n      trElement.classList.add(`type-${ev.type}`)\r\n\r\n      eventTableElement.appendChild(trElement)\r\n\r\n      lastUpdatedItemIndex = i\r\n    }\r\n  }\r\n\r\n  renderKeyPressBar()\r\n\r\n  const scrollEl = document.getElementById('scroll-target')!\r\n  scrollEl.scrollIntoView()\r\n}\r\n\r\nfunction animationRunner () {\r\n  renderKeyboardEventList()\r\n  window.requestAnimationFrame(animationRunner)\r\n}\r\nwindow.requestAnimationFrame(animationRunner)\r\n\r\n///\r\n\r\nexport function renderClear () {\r\n  const eventTableElement = document.getElementById('eventTable')!\r\n  eventTableElement.querySelectorAll('tr.item').forEach(el => el.remove())\r\n  lastUpdatedItemIndex = -1\r\n  issueItemChange()\r\n}\r\n","import { issueItemChange, renderClear } from './keyboardRender.js'\r\n\r\ninterface KeyEvent {\r\n  type: string\r\n  code: string\r\n  now: number\r\n}\r\n\r\nexport const events: KeyEvent[] = []\r\nexport const keyLastEventTypeMap: {[key: string]: string } = {}\r\n\r\nconst keyPressed: {[key: string]: boolean } = {}\r\n\r\nfunction onKey (ev: KeyboardEvent) {\r\n  if (ev.repeat) return\r\n\r\n  const now = (performance.now()) / 1000\r\n\r\n  // Chrome reports empty `ev.code` on right shift?\r\n  // In this case, the browser won't distinguish between two different types of shift\r\n  // e.g) When the left shift is pressed while the right shift is being pressed, the browser\r\n  //   wont trigger additional event as they both points to the same shift key\r\n  // IDK why. Just coalesce them to the left shift.\r\n  let evCode = ev.code\r\n  if (!evCode && ev.key === 'Shift') {\r\n    evCode = 'ShiftLeft'\r\n  }\r\n\r\n  if (ev.type === 'keydown') {\r\n    if (!keyPressed[evCode]) {\r\n      keyPressed[evCode] = true\r\n      events.push({\r\n        type: ev.type,\r\n        code: evCode,\r\n        now\r\n      })\r\n      keyLastEventTypeMap[evCode] = ev.type\r\n    }\r\n  } else if (ev.type === 'keyup') {\r\n    keyPressed[evCode] = false\r\n    events.push({\r\n      type: ev.type,\r\n      code: evCode,\r\n      now\r\n    })\r\n    keyLastEventTypeMap[evCode] = ev.type\r\n  }\r\n\r\n  issueItemChange()\r\n  ev.stopPropagation()\r\n  ev.preventDefault()\r\n}\r\n\r\ndocument.addEventListener('keydown', onKey)\r\ndocument.addEventListener('keyup', onKey)\r\n\r\nexport function removeAllLog () {\r\n  events.length = 0\r\n  Object.keys(keyLastEventTypeMap).forEach(key => delete keyLastEventTypeMap[key])\r\n  renderClear()\r\n}\r\n","import { audioVisualizerInitCanvas, audioVisualizerPushSamples } from './audioCanvasRenderer'\r\n\r\nconst micSelectEl = document.getElementById('mic-select')! as HTMLSelectElement\r\nconst micStartEl = document.getElementById('mic-start') as HTMLButtonElement\r\nlet audioContext: AudioContext | null = null\r\n\r\nasync function loadDevices () {\r\n  try {\r\n    // Request permission first\r\n    await navigator.mediaDevices.getUserMedia({ audio: true })\r\n\r\n    const devices = await navigator.mediaDevices.enumerateDevices()\r\n    const audioInputs = devices.filter(device => device.kind === 'audioinput')\r\n\r\n    if (audioInputs.length === 0) {\r\n      micSelectEl.innerHTML = '<option value=\"\">No microphones found</option>'\r\n      return\r\n    }\r\n\r\n    micSelectEl.innerHTML = ''\r\n    audioInputs.forEach(device => {\r\n      const option = document.createElement('option')\r\n      option.value = device.deviceId\r\n      option.textContent = device.label || `Microphone ${device.deviceId.slice(0, 8)}...`\r\n      micSelectEl.appendChild(option)\r\n    })\r\n  } catch (error) {\r\n    console.error('Error loading devices:', error)\r\n    micSelectEl.innerHTML = '<option value=\"\">Error loading devices</option>'\r\n  }\r\n}\r\n\r\nlet recordingStarted = false\r\n\r\nasync function startRecording () {\r\n  if (recordingStarted) return\r\n\r\n  try {\r\n    const selectedDeviceId = micSelectEl.value\r\n    if (!selectedDeviceId) {\r\n      alert('Please select a microphone')\r\n      return\r\n    }\r\n\r\n    audioContext = new AudioContext()\r\n    const sampleRate = audioContext.sampleRate\r\n    await audioContext.audioWorklet.addModule('./audioWorklet.js')\r\n\r\n    // Get media stream from selected device\r\n    const mediaStream = await navigator.mediaDevices.getUserMedia({\r\n      audio: {\r\n        deviceId: { exact: selectedDeviceId },\r\n        echoCancellation: false,\r\n        noiseSuppression: false,\r\n        autoGainControl: false\r\n      }\r\n    })\r\n\r\n    // Create source node\r\n    const sourceNode = audioContext.createMediaStreamSource(mediaStream)\r\n    const workletNode = new AudioWorkletNode(audioContext, 'microphone-processor')\r\n    workletNode.port.onmessage = (event) => {\r\n      const outputData = event.data.outputData as Float32Array\r\n      audioVisualizerPushSamples(outputData)\r\n    }\r\n\r\n    // Connect nodes\r\n    sourceNode.connect(workletNode)\r\n    workletNode.connect(audioContext.destination)\r\n\r\n    recordingStarted = true\r\n    audioVisualizerInitCanvas(sampleRate)\r\n  } catch (error) {\r\n    console.error('Error starting recording:', error)\r\n  }\r\n}\r\n\r\nmicStartEl.addEventListener('click', startRecording)\r\nmicSelectEl.addEventListener('focus', loadDevices)\r\n","import { removeAllLog } from './keypress'\r\nimport './keyboardRender'\r\nimport './micRecorder'\r\n\r\ndocument.getElementById('resetAllLogButton')?.addEventListener('click', removeAllLog)\r\n"],"names":["quickselect","arr","k","left","right","compare","defaultCompare","n","m","z","s","sd","newLeft","newRight","t","i","j","swap","tmp","a","b","mainCanvas","renderAudioformToCanvas","array","width","height","ctx","imageData","length","x","startIndex","endIndex","intervalSamples","maxSample","minSample","sample","intervalLength","q1Index","q1Sample","q3Index","q3Sample","maxSampleY","minSampleY","iy","index","q3SampleY","q1SampleY","startTime","sampleRate","audioAdjustment","samples","gcSampleSec","maxMoveTime","adjustAudioTiming","e","targetEl","rect","moveTime","audioVisualizerInitCanvas","newSampleRate","micAudioZoneEl","overlaySVG","cursorTextSpan","time","verticalLine","audioVisualizerPushSamples","newSamples","pendingTimeout","audioVisualizerRenderCanvas","referenceTime","renderCanvas","referenceIndex","dataBeginIndex","dataEndIndex","renderOutput","itemChanged","lastUpdatedItemIndex","renderBarTimeWidth","markWidth","logWidth","issueItemChange","renderKeyPressBar","pathSVGs","markHeight","events","lastEventTime","ev","eventElapsedTime","renderKeyboardEventList","eventTableElement","el","keycode","keyLastEventTypeMap","firstEventTime","delta","trElement","td0","td1","td2","td3","animationRunner","renderClear","keyPressed","onKey","now","evCode","removeAllLog","key","micSelectEl","micStartEl","audioContext","loadDevices","audioInputs","device","option","error","recordingStarted","startRecording","selectedDeviceId","mediaStream","sourceNode","workletNode","event","outputData"],"mappings":"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","x_google_ignoreList":[0]}