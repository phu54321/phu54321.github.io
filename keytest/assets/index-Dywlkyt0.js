(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();function k(t,o,e=0,i=t.length-1,n=U){for(;i>e;){if(i-e>600){const r=i-e+1,l=o-e+1,p=Math.log(r),m=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*m*(r-m)/r)*(l-r/2<0?-1:1),T=Math.max(e,Math.floor(o-l*m/r+x)),b=Math.min(i,Math.floor(o+(r-l)*m/r+x));k(t,o,T,b,n)}const s=t[o];let c=e,a=i;for(I(t,e,o),n(t[i],s)>0&&I(t,e,i);c<a;){for(I(t,c,a),c++,a--;n(t[c],s)<0;)c++;for(;n(t[a],s)>0;)a--}n(t[e],s)===0?I(t,e,a):(a++,I(t,a,i)),a<=o&&(e=a+1),o<=a&&(i=a-1)}}function I(t,o,e){const i=t[o];t[o]=t[e],t[e]=i}function U(t,o){return t<o?-1:t>o?1:0}let f=null;function Z(t){if(f===null)return;const{scrollWidth:o,scrollHeight:e}=f;(f.width!==o||f.height!==e)&&(f.width=o,f.height=e);const i=f.getContext("2d"),n=i.createImageData(o,e);n.data.fill(255);const s=t.length;for(let c=0;c<o;c++){const a=c*s/o|0,r=(c+1)*s/o|0,l=t.slice(a,r);let p=-1,m=1;for(const d of l)p<d&&(p=d),m>d&&(m=d);const x=l.length,T=x*1/4|0;k(l,T);const b=l[T],j=x*3/4|0;k(l,j);const W=l[j],z=(1-(p+1)/2)*(e-1)+.5|0,Y=(1-(m+1)/2)*(e-1)+.5|0;for(let d=z;d<=Y;d++){const g=(d*o+c)*4;n.data[g+0]=160,n.data[g+1]=160,n.data[g+2]=160}const K=(1-(W+1)/2)*(e-1)+.5|0,G=(1-(b+1)/2)*(e-1)+.5|0;for(let d=K;d<=G;d++){const g=(d*o+c)*4;n.data[g+0]=96,n.data[g+1]=96,n.data[g+2]=96}}i.putImageData(n,0,0)}let H=0,y=0,q=0;const E=[],B=10,X=.01;function N(t){const o=t.target,e=o.getBoundingClientRect(),n=(t.clientY-e.top)/(e.bottom-e.top)*X;o.id==="mic-audio-adjustment-left"&&(q-=n),o.id==="mic-audio-adjustment-right"&&(q+=n)}function J(t){const o=document.getElementById("mic-audio-zone");o.innerHTML=`
  <canvas id="mic-audio-canvas"></canvas>
  <svg id='cursor-position-overlay' viewBox="0 0 0.13 1" preserveaspectratio="none" xmlns="http://www.w3.org/2000/svg">
    <line class="vertical-line hidden" y0=0 y1=1 />
  </svg>
  <span id='cursor-position-overlay-text'></span>
  <div id='mic-audio-adjustment-left'>◀<br><br><br>◀◀</div>
  <div id='mic-audio-adjustment-right'>▶<br><br><br>▶▶</div>
  `,H=performance.now()/1e3,y=t,document.getElementById("mic-audio-adjustment-left")?.addEventListener("click",N),document.getElementById("mic-audio-adjustment-right")?.addEventListener("click",N),f=document.getElementById("mic-audio-canvas");const e=document.getElementById("cursor-position-overlay"),i=document.getElementById("cursor-position-overlay-text");e.addEventListener("mousemove",s=>{const c=e.getBoundingClientRect(),r=(s.clientX-c.left)/(c.right-c.left)*.13-.1,l=e.getElementsByClassName("vertical-line")[0];l.setAttribute("x1",(r+.1).toString()),l.setAttribute("x2",(r+.1).toString()),i.innerHTML=`${(r*1e3).toFixed(1)}ms`}),document.getElementById("rt-bar").setAttribute("viewBox","0 0 1.3 1")}function Q(t){E.push(...t),E.length>B*2*y&&(H+=B,E.splice(0,B*y))}let S=null;function R(t){S!==null&&(clearTimeout(S),S=null),_(t)}function _(t){if(f===null)return;S=null;const o=(t-q-H)*y|0,e=o-.1*y|0,i=o+.03*y|0,n=new Array(i-e);n.fill(0);for(let s=e;s<i;s++)n[s-e]=s<0||s>=E.length?0:E[s];Z(n),i>=E.length&&(S=setTimeout(()=>R(t),100))}let L=2,D=-1;const C=.1,M=.002,$=.004;function F(){L=2}function ee(){const t=[];t.push("<g>");for(let e=0;e<=100;e++){const i=e/100,n=1*(e%10===0?1:e%5===0?.7:.3);t.push(`
    <path class="event-bar-mark" d="M${i-M/2} ${1-n} h${M} V${n} h-${M} Z">
      <title>${i.toFixed(2)}s</title>
    </path>`)}if(t.push("</g>"),u.length>0){t.push("<g>");const e=u[u.length-1].now;for(const i of u){const n=e-i.now;if(n>=C)continue;const s=1-n/C;t.push(`
      <path class="event-bar-log-${i.type} event-bar-log"
        d="M${s} 0 l${-$/2} 0.5 l${$/2} 0.5 l${$/2} -0.5 Z"
      >
        <title>${i.code} ${i.type} ${n.toFixed(3)}s</title>
      </path>`)}t.push("</g>"),R(e)}document.querySelector("#keypress-graph .timing-lower").innerHTML=`-${C}s`,document.getElementById("rt-bar").innerHTML=t.join("")}function te(){if(!L||L&&(L--,L!==0))return;const t=document.getElementById("eventTable");for(const e of document.getElementsByClassName("btn")){const i=e.dataset.keycode;e.classList.remove("event-keydown"),e.classList.remove("event-keyup"),w[i]&&e.classList.add(`event-${w[i]}`)}if(u.length>0){const e=u[0].now;for(let i=D+1;i<u.length;i++){const n=u[i],s=n.now-e,c=i===0?null:n.now-u[i-1].now,a=document.createElement("tr"),r=document.createElement("td");r.innerText=`${n.type}`;const l=document.createElement("td");l.innerText=`${n.code}`;const p=document.createElement("td");p.innerText=`${(s*1e3).toFixed(2)}`;const m=document.createElement("td");c!==null&&(m.innerText=`${(c*1e3).toFixed(2)}`),a.appendChild(r),a.appendChild(l),a.appendChild(p),a.appendChild(m),a.classList.add("item"),a.classList.add(`type-${n.type}`),t.appendChild(a),D=i}}ee(),document.getElementById("scroll-target").scrollIntoView()}function O(){te(),window.requestAnimationFrame(O)}window.requestAnimationFrame(O);function ne(){document.getElementById("eventTable").querySelectorAll("tr.item").forEach(o=>o.remove()),D=-1,F()}const u=[],w={},A={};function V(t){if(t.repeat)return;const o=performance.now()/1e3;let e=t.code;!e&&t.key==="Shift"&&(e="ShiftLeft"),t.type==="keydown"?A[e]||(A[e]=!0,u.push({type:t.type,code:e,now:o}),w[e]=t.type):t.type==="keyup"&&(A[e]=!1,u.push({type:t.type,code:e,now:o}),w[e]=t.type),F(),t.stopPropagation(),t.preventDefault()}document.addEventListener("keydown",V);document.addEventListener("keyup",V);function oe(){u.length=0,Object.keys(w).forEach(t=>delete w[t]),ne()}const v=document.getElementById("mic-select"),ie=document.getElementById("mic-start");let h=null;async function se(){try{await navigator.mediaDevices.getUserMedia({audio:!0});const o=(await navigator.mediaDevices.enumerateDevices()).filter(e=>e.kind==="audioinput");if(o.length===0){v.innerHTML='<option value="">No microphones found</option>';return}v.innerHTML="",o.forEach(e=>{const i=document.createElement("option");i.value=e.deviceId,i.textContent=e.label||`Microphone ${e.deviceId.slice(0,8)}...`,v.appendChild(i)})}catch(t){console.error("Error loading devices:",t),v.innerHTML='<option value="">Error loading devices</option>'}}let P=!1;async function ce(){if(!P)try{const t=v.value;if(!t){alert("Please select a microphone");return}h=new AudioContext;const o=h.sampleRate;await h.audioWorklet.addModule("./audioWorklet.js");const e=await navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:t},echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1}}),i=h.createMediaStreamSource(e),n=new AudioWorkletNode(h,"microphone-processor");n.port.onmessage=s=>{const c=s.data.outputData;Q(c)},i.connect(n),n.connect(h.destination),P=!0,J(o)}catch(t){console.error("Error starting recording:",t)}}ie.addEventListener("click",ce);v.addEventListener("focus",se);document.getElementById("resetAllLogButton")?.addEventListener("click",oe);
//# sourceMappingURL=index-Dywlkyt0.js.map
