{"version":3,"file":"js/app.8b3538b8.js","mappings":"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","sources":["webpack://rhythmvideotrainer/./src/utils/resizeWatcher.ts","webpack://rhythmvideotrainer/./src/pref/prefIO.ts","webpack://rhythmvideotrainer/./src/pref/AudioLatency.ts","webpack://rhythmvideotrainer/./src/pref/ColorPref.ts","webpack://rhythmvideotrainer/./src/gameEnv/djmaxLanes.ts","webpack://rhythmvideotrainer/./src/gameEnv/index.ts","webpack://rhythmvideotrainer/./src/trainerView/noteOverlay.ts","webpack://rhythmvideotrainer/./src/utils/requestVideoFrameCallback.ts","webpack://rhythmvideotrainer/./src/trainerView/VideoWithOverlay.vue?c05d","webpack://rhythmvideotrainer/./src/trainerView/VideoWithOverlay.vue","webpack://rhythmvideotrainer/./src/utils/resizeCanvasDPIAware.ts","webpack://rhythmvideotrainer/./src/components/AudioScrollbar.vue?ca6f","webpack://rhythmvideotrainer/./src/components/AudioScrollbar.vue","webpack://rhythmvideotrainer/./src/components/NumberSpinner.vue?dc87","webpack://rhythmvideotrainer/./src/components/NumberSpinner.vue","webpack://rhythmvideotrainer/./src/utils/extractAudio.ts","webpack://rhythmvideotrainer/./src/trainerView/useKeylog.ts","webpack://rhythmvideotrainer/./src/trainerView/useBookmarkList.ts","webpack://rhythmvideotrainer/./src/pref/KeyConfig.ts","webpack://rhythmvideotrainer/./src/utils/useKeyHandler.ts","webpack://rhythmvideotrainer/./src/trainerView/TrainerView.vue?7140","webpack://rhythmvideotrainer/./src/trainerView/TrainerView.vue","webpack://rhythmvideotrainer/./src/gameEnv/list.ts","webpack://rhythmvideotrainer/./src/pref/VideoProps.ts","webpack://rhythmvideotrainer/./src/components/KeyConfigEditor.vue?759b","webpack://rhythmvideotrainer/./src/components/KeyConfigEditor.vue","webpack://rhythmvideotrainer/./src/App.vue?2a5e","webpack://rhythmvideotrainer/./src/App.vue","webpack://rhythmvideotrainer/./src/main.ts","webpack://rhythmvideotrainer/webpack/bootstrap","webpack://rhythmvideotrainer/webpack/runtime/chunk loaded","webpack://rhythmvideotrainer/webpack/runtime/compat get default export","webpack://rhythmvideotrainer/webpack/runtime/define property getters","webpack://rhythmvideotrainer/webpack/runtime/global","webpack://rhythmvideotrainer/webpack/runtime/hasOwnProperty shorthand","webpack://rhythmvideotrainer/webpack/runtime/make namespace object","webpack://rhythmvideotrainer/webpack/runtime/jsonp chunk loading","webpack://rhythmvideotrainer/webpack/startup"],"sourcesContent":["import { onBeforeUnmount, onMounted, Ref, ref } from 'vue'\r\n\r\nexport function registerResizeWatcher (elementRef: Ref, handler: () => void) {\r\n  const ro = ref(null) as Ref<ResizeObserver | null>\r\n\r\n  onMounted(() => {\r\n    const ob = new ResizeObserver(onResize)\r\n    ob.observe(elementRef.value!)\r\n    ro.value = ob\r\n\r\n    handler()\r\n  })\r\n\r\n  onBeforeUnmount(() => {\r\n    ro.value?.unobserve(elementRef.value!)\r\n  })\r\n\r\n  function onResize () {\r\n    handler()\r\n  }\r\n}\r\n","import { merge } from 'lodash-es'\r\nimport { Ref, ref, watch } from 'vue'\r\n\r\nconst ioKeySet = new Set<string>()\r\n\r\nexport class PrefIO <T> {\r\n  prefKey: string\r\n  pref: Ref<T>\r\n  defaultConstructor: () => T\r\n\r\n  constructor (\r\n    prefKey: string,\r\n    defaultConstructor: () => T\r\n  ) {\r\n    this.prefKey = prefKey\r\n    this.defaultConstructor = defaultConstructor\r\n    this.pref = ref(this._load()) as Ref<T>\r\n    watch(this.pref, (v) => {\r\n      localStorage.setItem(this.prefKey, JSON.stringify(v))\r\n    }, { deep: true })\r\n\r\n    if (ioKeySet.has(prefKey)) {\r\n      throw new Error('Duplicate prefKey')\r\n    }\r\n    ioKeySet.add(prefKey)\r\n  }\r\n\r\n  _load (): T {\r\n    const pref = localStorage.getItem(this.prefKey)\r\n    const defaultValue = this.defaultConstructor.call(null)\r\n    if (pref) {\r\n      return merge(defaultValue, JSON.parse(pref))\r\n    } else return defaultValue\r\n  }\r\n\r\n  get (): T {\r\n    return this.pref.value\r\n  }\r\n\r\n  clear () {\r\n    this.pref.value = this.defaultConstructor.call(null)\r\n    localStorage.removeItem(this.prefKey)\r\n  }\r\n\r\n  set (newPref: T) {\r\n    this.pref.value = newPref\r\n    localStorage.setItem(this.prefKey, JSON.stringify(this.pref.value))\r\n  }\r\n}\r\n","import { PrefIO } from './prefIO'\r\n\r\nexport const audioLatencyIO = new PrefIO('kAudioLatency', () => 0)\r\n","import { PrefIO } from './prefIO'\r\nimport tinycolor2 from 'tinycolor2'\r\n\r\nexport enum ColorKey {\r\n  Number,\r\n  Trigger,\r\n  Side\r\n}\r\n\r\nexport type ColorPref = { [key in ColorKey]: tinycolor2.ColorFormats.RGBA }\r\n\r\nexport function defaultColorPref (): ColorPref {\r\n  return {\r\n    [ColorKey.Number]: { r: 204, g: 204, b: 204, a: 1 },\r\n    [ColorKey.Trigger]: { r: 254, g: 146, b: 0, a: 1 },\r\n    [ColorKey.Side]: { r: 164, g: 221, b: 0, a: 1 }\r\n  }\r\n}\r\n\r\nexport const colorPrefIO = new PrefIO('kColorPref', defaultColorPref)\r\n","import { GearPos } from './list'\r\nimport { ColorKey, colorPrefIO } from '@/pref/ColorPref'\r\nimport { VideoProps } from '@/pref/VideoProps'\r\nimport { Lane, GameEnv } from '.'\r\n\r\nconst playAreaWidth = 0.26042\r\n\r\nconst judgementLinePosY = 0.6963\r\nfunction judgementLinePosX (pos: GearPos): number {\r\n  switch (pos) {\r\n    case 'left': return 0.037\r\n    case 'center': return 0.369\r\n    case 'right': return 0.701\r\n  }\r\n}\r\n\r\nfunction calcY (videoProps: VideoProps, videoTime: number, noteTime: number) {\r\n  const yPerSecond = 0.25648 * videoProps.noteSpeedMultiplier\r\n  return judgementLinePosY - yPerSecond * (noteTime - videoTime)\r\n}\r\n\r\nfunction createNumberLane (index1: number, keyCount: number): Lane {\r\n  let noteSizeW = playAreaWidth\r\n  switch (keyCount) {\r\n    case 4: noteSizeW /= 4; break\r\n    case 5: noteSizeW /= 5; break\r\n    case 6: case 8: noteSizeW /= 6; break\r\n    default: throw new Error('Bad keyCount')\r\n  }\r\n\r\n  return {\r\n    name: `Lane${index1}`,\r\n    pos (videoProps, videoTime, noteTime) {\r\n      return {\r\n        x: noteSizeW * (index1 - 1) + judgementLinePosX(videoProps.gearPos),\r\n        y: calcY(videoProps, videoTime, noteTime),\r\n        w: noteSizeW\r\n      }\r\n    },\r\n    color () {\r\n      return colorPrefIO.get()[ColorKey.Number]\r\n    }\r\n  }\r\n}\r\n\r\nfunction createSideLane (direction: string, index0: number): Lane {\r\n  return {\r\n    name: `Side${direction}`,\r\n    pos (videoProps, videoTime, noteTime) {\r\n      return {\r\n        x: playAreaWidth / 2 * index0 + judgementLinePosX(videoProps.gearPos),\r\n        y: calcY(videoProps, videoTime, noteTime),\r\n        w: playAreaWidth / 2\r\n      }\r\n    },\r\n    color () {\r\n      return colorPrefIO.get()[ColorKey.Side]\r\n    }\r\n  }\r\n}\r\n\r\nfunction createTriggerLane (direction: string, index0: number): Lane {\r\n  return {\r\n    name: `Trigger${direction}`,\r\n    pos (videoProps, videoTime, noteTime) {\r\n      return {\r\n        x: playAreaWidth / 2 * index0 + judgementLinePosX(videoProps.gearPos),\r\n        y: calcY(videoProps, videoTime, noteTime),\r\n        w: playAreaWidth / 2\r\n      }\r\n    },\r\n    color () {\r\n      return colorPrefIO.get()[ColorKey.Trigger]\r\n    }\r\n  }\r\n}\r\n\r\n/// ///////////\r\n\r\nexport function djmaxLanes8b (gearPos: GearPos): GameEnv {\r\n  return {\r\n    name: 'djmax_8b',\r\n    playAreaWidth,\r\n    judgementLinePos: { x: judgementLinePosX(gearPos), y: judgementLinePosY },\r\n    lanes: [\r\n      createNumberLane(1, 8),\r\n      createNumberLane(2, 8),\r\n      createNumberLane(3, 8),\r\n      createNumberLane(4, 8),\r\n      createNumberLane(5, 8),\r\n      createNumberLane(6, 8),\r\n\r\n      createSideLane('L', 0),\r\n      createSideLane('R', 1),\r\n\r\n      createTriggerLane('L', 0),\r\n      createTriggerLane('R', 1)\r\n    ]\r\n  }\r\n}\r\n\r\nexport function djmaxLanes6b (gearPos: GearPos): GameEnv {\r\n  return {\r\n    name: 'djmax_6b',\r\n    playAreaWidth,\r\n    judgementLinePos: { x: judgementLinePosX(gearPos), y: judgementLinePosY },\r\n    lanes: [\r\n      createNumberLane(1, 6),\r\n      createNumberLane(2, 6),\r\n      createNumberLane(3, 6),\r\n      createNumberLane(4, 6),\r\n      createNumberLane(5, 6),\r\n      createNumberLane(6, 6),\r\n\r\n      createSideLane('L', 0),\r\n      createSideLane('R', 1)\r\n    ]\r\n  }\r\n}\r\n\r\nexport function djmaxLanes5b (gearPos: GearPos): GameEnv {\r\n  return {\r\n    name: 'djmax_5b',\r\n    playAreaWidth,\r\n    judgementLinePos: { x: judgementLinePosX(gearPos), y: judgementLinePosY },\r\n    lanes: [\r\n      createNumberLane(1, 5),\r\n      createNumberLane(2, 5),\r\n      createNumberLane(3, 5),\r\n      createNumberLane(4, 5),\r\n      createNumberLane(5, 5),\r\n\r\n      createSideLane('L', 0),\r\n      createSideLane('R', 1)\r\n    ]\r\n  }\r\n}\r\n\r\nexport function djmaxLanes4b (gearPos: GearPos): GameEnv {\r\n  return {\r\n    name: 'djmax_4b',\r\n    playAreaWidth,\r\n    judgementLinePos: { x: judgementLinePosX(gearPos), y: judgementLinePosY },\r\n    lanes: [\r\n      createNumberLane(1, 4),\r\n      createNumberLane(2, 4),\r\n      createNumberLane(3, 4),\r\n      createNumberLane(4, 4),\r\n\r\n      createSideLane('L', 0),\r\n      createSideLane('R', 1)\r\n    ]\r\n  }\r\n}\r\n","import { VideoProps } from '@/pref/VideoProps'\r\nimport { djmaxLanes4b, djmaxLanes5b, djmaxLanes6b, djmaxLanes8b } from './djmaxLanes'\r\nimport { GameEnvName, GearPos } from './list'\r\nimport tinycolor2 from 'tinycolor2'\r\n\r\nexport interface NotePos {\r\n  x: number\r\n  y: number\r\n  w: number\r\n}\r\n\r\nexport interface Lane {\r\n  name: string\r\n  pos(props: VideoProps, videoTime: number, noteTime: number): NotePos\r\n  color(): tinycolor2.ColorFormats.RGBA\r\n}\r\n\r\nexport interface GameEnv {\r\n  name: GameEnvName\r\n  judgementLinePos: { x: number, y: number }\r\n  playAreaWidth: number\r\n  lanes: Lane[]\r\n}\r\n\r\nexport function getGameEnv (props: {\r\n  gameEnvName: GameEnvName,\r\n  gearPos: GearPos\r\n}) {\r\n  switch (props.gameEnvName) {\r\n    case 'djmax_4b': return djmaxLanes4b(props.gearPos)\r\n    case 'djmax_5b': return djmaxLanes5b(props.gearPos)\r\n    case 'djmax_6b': return djmaxLanes6b(props.gearPos)\r\n    case 'djmax_8b': return djmaxLanes8b(props.gearPos)\r\n  }\r\n}\r\n","import { audioLatencyIO } from '@/pref/AudioLatency'\r\nimport { VideoProps } from '@/pref/VideoProps'\r\nimport { KeyLog } from '@/KeyLog'\r\nimport tinycolor from 'tinycolor2'\r\nimport { toRaw } from 'vue'\r\nimport { getGameEnv } from '@/gameEnv'\r\n\r\nexport function updateNoteOverlayCanvas (\r\n  videoElement: HTMLVideoElement,\r\n  targetCanvas: HTMLCanvasElement,\r\n  videoProps_: VideoProps,\r\n  keyLog_: KeyLog\r\n) {\r\n  const videoProps = toRaw(videoProps_)\r\n  const keyLog = toRaw(keyLog_)\r\n\r\n  const ctx = targetCanvas.getContext('2d')!\r\n  const { width, height } = targetCanvas\r\n  const currentTime = videoElement.currentTime + videoProps.audioSync + audioLatencyIO.get()\r\n  const gameEnv = getGameEnv(videoProps)\r\n  const { judgementLinePos } = gameEnv\r\n\r\n  const yPerSecond = 0.25648 * videoProps.noteSpeedMultiplier\r\n  const perfectRange = 0.042\r\n  const perfectY = perfectRange * yPerSecond\r\n\r\n  ctx.clearRect(0, 0, width, height)\r\n\r\n  // Enter scaled world\r\n  const oldTransform = ctx.getTransform()\r\n  ctx.setTransform(1, 0, 0, 1, 0, 0)\r\n  ctx.scale(width, height)\r\n\r\n  // darken non-note-regions.\r\n  ctx.fillStyle = '#000000e0'\r\n  ctx.rect(0, 0, judgementLinePos.x, 1)\r\n  ctx.rect(judgementLinePos.x + gameEnv.playAreaWidth, 0, 1, 1)\r\n  ctx.fill()\r\n\r\n  // Draw note region boundary\r\n  ctx.strokeStyle = 'blue'\r\n  ctx.lineWidth = 0.001\r\n  ctx.beginPath()\r\n\r\n  ctx.moveTo(judgementLinePos.x, 0)\r\n  ctx.lineTo(judgementLinePos.x, 1)\r\n\r\n  ctx.moveTo(judgementLinePos.x + gameEnv.playAreaWidth, 0)\r\n  ctx.lineTo(judgementLinePos.x + gameEnv.playAreaWidth, 1)\r\n\r\n  ctx.moveTo(judgementLinePos.x, judgementLinePos.y)\r\n  ctx.lineTo(judgementLinePos.x + gameEnv.playAreaWidth, judgementLinePos.y)\r\n\r\n  ctx.stroke()\r\n\r\n  // render notes\r\n  for (const keyEntry of keyLog) {\r\n    // Calculate Y coord of start/end\r\n\r\n    const { lane } = keyEntry\r\n    const keydownY = lane.pos(videoProps, currentTime, keyEntry.keydownTime).y\r\n    const keyupY = lane.pos(videoProps, currentTime, keyEntry.keyupTime || currentTime).y\r\n\r\n    // Don't render invisible notes\r\n    if (keydownY < -perfectY || keyupY > 1 + perfectY) continue\r\n\r\n    // Color\r\n    const keydownPos = lane.pos(videoProps, currentTime, keyEntry.keydownTime)\r\n    const noteColorString = lane.color()\r\n    const noteColorRGB = tinycolor(noteColorString).toRgb()\r\n    const { x: rectX, w: rectW } = keydownPos\r\n\r\n    // Render\r\n    ctx.fillStyle = `rgba(${noteColorRGB.r}, ${noteColorRGB.g}, ${noteColorRGB.b}, 0.8)`\r\n    ctx.beginPath()\r\n    ctx.moveTo(rectX + rectW / 2, keydownY - perfectY / 2)\r\n    ctx.lineTo(rectX, keydownY)\r\n    ctx.lineTo(rectX + rectW / 2, keydownY + perfectY / 2)\r\n    ctx.lineTo(rectX + rectW, keydownY)\r\n    ctx.closePath()\r\n    ctx.fill()\r\n\r\n    // Render keyup\r\n    const trailW = rectW * 0.12\r\n    ctx.fillStyle = `rgba(${noteColorRGB.r}, ${noteColorRGB.g}, ${noteColorRGB.b}, 0.2)`\r\n    ctx.beginPath()\r\n    ctx.rect(rectX + rectW / 2 - trailW / 2, keyupY, trailW, (keydownY - keyupY))\r\n    ctx.fill()\r\n\r\n    // Render perfect range\r\n    // ctx.beginPath()\r\n    // ctx.strokeStyle = '#ffffffc0'\r\n    // ctx.lineWidth = 0.004\r\n    // ctx.moveTo(rectX + rectW / 2, keydownY - perfectY + rectH / 2)\r\n    // ctx.lineTo(rectX + rectW / 2, keydownY + perfectY + rectH / 2)\r\n    // ctx.stroke()\r\n  }\r\n  // revert old transform\r\n  ctx.setTransform(oldTransform)\r\n}\r\n","import { onBeforeUnmount, onMounted, Ref } from 'vue'\r\n\r\nexport function crossPlatformRequestVideoFrameCallback (videoEl: HTMLVideoElement, cb: () => void) {\r\n  if ((videoEl as any).requestVideoFrameCallback) {\r\n    return (videoEl as any).requestVideoFrameCallback(cb)\r\n  } else {\r\n    return requestAnimationFrame(cb)\r\n  }\r\n}\r\n\r\nexport function crossPlatformCancelVideoFrameCallback (videoEl: HTMLVideoElement, reqId: number) {\r\n  if ((videoEl as any).cancelVideoFrameCallback) {\r\n    return (videoEl as any).cancelVideoFrameCallback(reqId)\r\n  } else {\r\n    return cancelAnimationFrame(reqId)\r\n  }\r\n}\r\n\r\nexport function useVideoFrameCallback (videoEl: Ref<HTMLVideoElement | null>, onVideoFrame: () => void) {\r\n// render overlay canvas\r\n  let videoIntervalHandle: null | number = null\r\n  onMounted(() => {\r\n    if (videoEl.value) {\r\n      videoIntervalHandle = crossPlatformRequestVideoFrameCallback(videoEl.value, cb)\r\n    }\r\n  })\r\n\r\n  onBeforeUnmount(() => {\r\n    if (videoIntervalHandle) {\r\n      if (videoEl.value) {\r\n        crossPlatformCancelVideoFrameCallback(videoEl.value, videoIntervalHandle)\r\n      }\r\n      videoIntervalHandle = null\r\n    }\r\n  })\r\n\r\n  function cb () {\r\n    if (videoEl.value) {\r\n      videoIntervalHandle = crossPlatformRequestVideoFrameCallback(videoEl.value, cb)\r\n      onVideoFrame()\r\n    }\r\n  }\r\n}\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\n\nimport { onMounted, onUnmounted, Ref, ref, watch } from 'vue'\r\nimport { registerResizeWatcher } from '@/utils/resizeWatcher'\r\nimport { updateNoteOverlayCanvas } from './noteOverlay'\r\nimport { VideoProps } from '@/pref/VideoProps'\r\nimport { KeyLog } from '@/KeyLog'\r\nimport { useVideoFrameCallback } from '@/utils/requestVideoFrameCallback'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'VideoWithOverlay',\n  props: {\n    src: null,\n    currentTime: null,\n    playbackRate: null,\n    videoProps: null,\n    keyLog: null\n  },\n  emits: [\"update:currentTime\"],\n  setup(__props: any, { expose, emit }: { emit: ({(eventName: 'update:currentTime', currentTime: number): void}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\r\n  src: string\r\n  currentTime: number\r\n  playbackRate: number\r\n  videoProps: VideoProps\r\n  keyLog: KeyLog\r\n};\n\r\n\r\n\r\n\r\n\r\nconst root = ref(null) as Ref<null | HTMLDivElement>\r\nconst video = ref(null) as Ref<null | HTMLVideoElement>\r\nconst overlayCanvas = ref(null) as Ref<any>\r\n\r\nfunction resizeOverlayCanvas () {\r\n  if (!video.value) return\r\n  if (video.value.readyState < 1) return // Should at least be HAVE_METADATA state\r\n\r\n  const canvas = overlayCanvas.value\r\n  if (!canvas) return\r\n\r\n  // Resize coordinate system of canvas\r\n  const { videoWidth, videoHeight } = video.value\r\n\r\n  // Resize canvas to comply with letterbox of <video> element.\r\n  const rect = root.value!.getClientRects()[0]\r\n  const properZoom = Math.min(rect.width / videoWidth, rect.height / videoHeight)\r\n  const properWidth = videoWidth * properZoom + 'px'\r\n  const properHeight = videoHeight * properZoom + 'px'\r\n\r\n  if (\r\n    canvas.watch !== videoWidth ||\r\n    canvas.height !== videoHeight ||\r\n    canvas.style.width !== properWidth ||\r\n    canvas.style.height !== properHeight\r\n  ) {\r\n    canvas.width = videoWidth\r\n    canvas.height = videoHeight\r\n    canvas.style.width = properWidth\r\n    canvas.style.height = properHeight\r\n  }\r\n}\r\n\r\nregisterResizeWatcher(root, resizeOverlayCanvas)\r\n\r\n// render overlay canvas\r\nuseVideoFrameCallback(video, () => {\r\n  resizeOverlayCanvas()\r\n  if (video.value && overlayCanvas.value) {\r\n    updateNoteOverlayCanvas(\r\n      video.value,\r\n      overlayCanvas.value,\r\n      props.videoProps,\r\n      props.keyLog\r\n    )\r\n  }\r\n})\r\n\r\n// Pause video on change\r\nwatch(() => props.src, () => {\r\n  video.value?.pause()\r\n}, { immediate: true })\r\n\r\n/// ////\r\n\r\nconst playbackStartTime = ref(Date.now() / 1000)\r\n\r\nwatch(() => props.currentTime, (newValue: number) => {\r\n  if (video.value) {\r\n    const newPlaybackStartTime = Date.now() / 1000 - (newValue / props.playbackRate)\r\n\r\n    // Prevent feedback loop with emit('update:currentTime')\r\n    if (Math.abs(newPlaybackStartTime - playbackStartTime.value) < 0.05) return\r\n\r\n    playbackStartTime.value = newPlaybackStartTime\r\n    video.value.currentTime = props.currentTime\r\n    video.value.playbackRate = props.playbackRate\r\n    video.value.play()\r\n  }\r\n})\r\n\r\nwatch(() => props.playbackRate, (v: number) => {\r\n  if (video.value) {\r\n    video.value.playbackRate = v\r\n    adjustPlayStartTime()\r\n  }\r\n})\r\n\r\nconst reqId = ref(0)\r\n\r\nfunction updateCurrentTime () {\r\n  if (video.value) {\r\n    if (video.value.paused || video.value.seeking) {\r\n      emit('update:currentTime', video.value.currentTime)\r\n    } else {\r\n      emit('update:currentTime', ((Date.now() / 1000) - playbackStartTime.value) * props.playbackRate)\r\n    }\r\n  }\r\n  reqId.value = requestAnimationFrame(updateCurrentTime)\r\n}\r\n\r\nfunction adjustPlayStartTime () {\r\n  if (video.value) {\r\n    playbackStartTime.value = Date.now() / 1000 - (video.value.currentTime / props.playbackRate)\r\n  }\r\n}\r\n\r\n// Exported to TrainerView.vue\r\n// eslint-disable-next-line no-unused-vars\r\nexpose({\r\n  getCurrentVideoTime (): number {\r\n    return video.value!.currentTime\r\n  }\r\n})\r\n\r\n/// ////////////\r\n\r\nonMounted(() => {\r\n  video.value!.src = props.src\r\n  reqId.value = requestAnimationFrame(updateCurrentTime)\r\n})\r\n\r\nonUnmounted(() => {\r\n  cancelAnimationFrame(reqId.value)\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref_key: \"root\",\n    ref: root,\n    class: \"video-container\"\n  }, [\n    _createElementVNode(\"video\", {\n      ref_key: \"video\",\n      ref: video,\n      src: __props.src,\n      onTimeupdate: adjustPlayStartTime,\n      onLoadedmetadata: resizeOverlayCanvas\n    }, null, 40, _hoisted_1),\n    _createElementVNode(\"canvas\", {\n      ref_key: \"overlayCanvas\",\n      ref: overlayCanvas\n    }, null, 512)\n  ], 512))\n}\n}\n\n})","import script from \"./VideoWithOverlay.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./VideoWithOverlay.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./VideoWithOverlay.vue?vue&type=style&index=0&id=5ba3f4d4&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","export function getDevicePixelRatio () {\r\n  return window.devicePixelRatio || 1\r\n}\r\n\r\nexport function resizeCanvasDPIAware (canvas: HTMLCanvasElement, size: { width: number, height: number}) {\r\n  // Get the device pixel ratio, falling back to 1.\r\n  const dpr = getDevicePixelRatio()\r\n  // Get the size of the canvas in CSS pixels.\r\n  // Give the canvas pixel dimensions of their CSS\r\n  // size * the device pixel ratio.\r\n  const properW = (size.width * dpr) | 0\r\n  const properH = (size.height * dpr) | 0\r\n  if (canvas.width !== properW || canvas.height !== properH) {\r\n    canvas.width = properW\r\n    canvas.height = properH\r\n\r\n    const ctx = canvas.getContext('2d')!\r\n    ctx.resetTransform()\r\n    ctx.scale(dpr, dpr)\r\n  }\r\n}\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"canvas-container\" }\n\nimport { ref, toRefs, watch, onMounted, computed } from 'vue'\r\nimport quickselect from 'quickselect'\r\nimport { registerResizeWatcher } from '@/utils/resizeWatcher'\r\nimport { resizeCanvasDPIAware, getDevicePixelRatio } from '@/utils/resizeCanvasDPIAware'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'AudioScrollbar',\n  props: {\n    title: null,\n    audioBuffer: null,\n    playPercent: null,\n    markList: null\n  },\n  emits: [\"update:playPercent\"],\n  setup(__props: any, { emit }: { emit: ({(eventName: 'update:playPercent', playPercent: number): void}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\r\n  title: string,\r\n  audioBuffer: AudioBuffer,\r\n  playPercent: number,\r\n  markList: number[]\r\n};\n\r\n\r\n\r\n\r\nconst { audioBuffer, playPercent } = toRefs(props)\r\nconst waveformCanvas = ref<null | HTMLCanvasElement>(null)\r\nconst overlayCanvas = ref<null | HTMLCanvasElement>(null)\r\n\r\n// ----------------\r\n\r\n// Waveform rendering\r\n\r\nfunction renderCanvas () {\r\n  const channel0 = audioBuffer.value.getChannelData(0)\r\n  const { length } = channel0\r\n\r\n  const canvas = waveformCanvas.value!\r\n  let { scrollWidth: width, scrollHeight: height } = canvas\r\n  const dpr = getDevicePixelRatio()\r\n  width = (width * dpr) | 0\r\n  height = (height * dpr) | 0\r\n  if (canvas.width !== width || canvas.height !== height) {\r\n    canvas.width = width\r\n    canvas.height = height\r\n  }\r\n  const ctx = waveformCanvas.value!.getContext('2d')!\r\n\r\n  const imageData = ctx.createImageData(width, height)\r\n  for (let index = 0; index < width * height * 4; index += 4) {\r\n    imageData.data[index + 0] = 0x19\r\n    imageData.data[index + 1] = 0x19\r\n    imageData.data[index + 2] = 0x19\r\n    imageData.data[index + 3] = 0xcc\r\n  }\r\n\r\n  for (let x = 0; x < width; x++) {\r\n    const startIndex = x * length / width | 0\r\n    const endIndex = (x + 1) * length / width | 0\r\n    const intervalSamples = channel0.slice(startIndex, endIndex)\r\n\r\n    let maxSample = -1\r\n    let minSample = 1\r\n    for (const sample of intervalSamples) {\r\n      if (maxSample < sample) maxSample = sample\r\n      if (minSample > sample) minSample = sample\r\n    }\r\n    const intervalLength = intervalSamples.length\r\n    const q1Index = intervalLength * 1 / 4 | 0\r\n    quickselect(intervalSamples, q1Index)\r\n    const q1Sample = intervalSamples[q1Index]\r\n\r\n    const q3Index = intervalLength * 3 / 4 | 0\r\n    quickselect(intervalSamples, q3Index)\r\n    const q3Sample = intervalSamples[q3Index]\r\n\r\n    // maxSample = 1 → y = 0, minSample = -1 → y = height - 1\r\n    const maxSampleY = ((1 - (maxSample + 1) / 2.0) * (height - 1) + 0.5) | 0\r\n    const minSampleY = ((1 - (minSample + 1) / 2.0) * (height - 1) + 0.5) | 0\r\n    for (let iy = maxSampleY; iy <= minSampleY; iy++) {\r\n      const index = (iy * width + x) * 4\r\n      imageData.data[index + 0] = 0x72\r\n      imageData.data[index + 1] = 0x72\r\n      imageData.data[index + 2] = 0x72\r\n    }\r\n\r\n    const q3SampleY = ((1 - (q3Sample + 1) / 2.0) * (height - 1) + 0.5) | 0\r\n    const q1SampleY = ((1 - (q1Sample + 1) / 2.0) * (height - 1) + 0.5) | 0\r\n    for (let iy = q3SampleY; iy <= q1SampleY; iy++) {\r\n      const index = (iy * width + x) * 4\r\n      imageData.data[index + 0] = 0xa8\r\n      imageData.data[index + 1] = 0xa8\r\n      imageData.data[index + 2] = 0xa8\r\n    }\r\n  }\r\n\r\n  ctx.putImageData(imageData, 0, 0)\r\n}\r\n\r\nonMounted(renderCanvas)\r\nwatch(audioBuffer, renderCanvas)\r\n\r\n// ----------------\r\n\r\nconst rerenderWatcher = computed(() => {\r\n  return [\r\n    playPercent.value,\r\n    props.markList\r\n  ]\r\n})\r\n\r\n// Cursor rendering part\r\nfunction renderOverlay () {\r\n  const canvas = overlayCanvas.value\r\n  if (canvas) {\r\n    const { scrollWidth: width, scrollHeight: height } = canvas\r\n    resizeCanvasDPIAware(canvas, { width, height })\r\n\r\n    const ctx = canvas.getContext('2d')!\r\n    ctx.fillStyle = 'rgba(0, 0, 0, 0)'\r\n    ctx.clearRect(0, 0, width, height)\r\n\r\n    // Play percent\r\n    ctx.fillStyle = '#C5813180'\r\n    ctx.fillRect(0, 0, width * playPercent.value, height)\r\n\r\n    // Bookmarks\r\n    const markWidth = 3\r\n    ctx.fillStyle = '#FF4343CC'\r\n    for (const mark of props.markList) {\r\n      ctx.fillRect(mark * width - (markWidth / 2), 0, markWidth, height)\r\n    }\r\n\r\n    // title(caption)\r\n    ctx.fillStyle = 'white'\r\n    ctx.font = '16px Pretendard Variable'\r\n    ctx.textBaseline = 'middle'\r\n    ctx.fillText(props.title, 20, 15)\r\n  }\r\n}\r\n\r\nonMounted(renderOverlay)\r\nwatch(rerenderWatcher, renderOverlay)\r\n\r\nfunction onClick (event: MouseEvent) {\r\n  const canvas = overlayCanvas.value!\r\n  emit('update:playPercent', event.offsetX / canvas.scrollWidth)\r\n}\r\n\r\n// ----------------\r\n\r\n// Resize handler\r\n\r\nregisterResizeWatcher(waveformCanvas, onResize)\r\n\r\nfunction onResize () {\r\n  renderCanvas()\r\n  renderOverlay()\r\n}\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"canvas\", {\n      ref_key: \"waveformCanvas\",\n      ref: waveformCanvas\n    }, null, 512),\n    _createElementVNode(\"canvas\", {\n      ref_key: \"overlayCanvas\",\n      ref: overlayCanvas,\n      onClick: onClick\n    }, null, 512)\n  ]))\n}\n}\n\n})","import script from \"./AudioScrollbar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AudioScrollbar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AudioScrollbar.vue?vue&type=style&index=0&id=5a1b91b1&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"spinner-container\" }\nconst _hoisted_2 = [\"value\"]\n\nimport { nextTick, Ref, ref } from 'vue'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'NumberSpinner',\n  props: {\n    modelValue: null,\n    step: null,\n    decimalPrecision: null\n  },\n  emits: [\"update:modelValue\"],\n  setup(__props: any, { emit }: { emit: ({(eventName: 'update:modelValue', newValue: number): void}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\r\n  modelValue: number,\r\n  step?: number,\r\n  decimalPrecision?: number\r\n};\n\r\n\r\n\r\nconst field = ref(null) as Ref<null | HTMLInputElement>\r\n\r\n/// /\r\n\r\nfunction step (multiplier: number) {\r\n  updateValue(props.modelValue + (props.step || 1) * multiplier)\r\n}\r\n\r\nfunction onKeyDown (ev: KeyboardEvent) {\r\n  if (!field.value) return\r\n\r\n  if (ev.key.startsWith('Arrow')) {\r\n    ev.stopPropagation()\r\n\r\n    const selStart = Math.max(field.value.selectionStart || 1, 1)\r\n    const v = field.value.value\r\n    const periodPos = (props.decimalPrecision === 0) ? v.length : v.indexOf('.')\r\n\r\n    let step: number\r\n    if (selStart <= periodPos) {\r\n      // 12^3.4567 (selStart 2, periodPos 3)\r\n      // 45^6 (selStart 2, periodPos 3)\r\n      step = Math.pow(10, periodPos - selStart)\r\n    } else {\r\n      // 12.34^567 (selStart 5, periodPos 2)\r\n      step = Math.pow(10, periodPos - selStart + 1)\r\n    }\r\n    if (ev.key === 'ArrowUp') {\r\n      updateValue(props.modelValue + step)\r\n      ev.preventDefault()\r\n      nextTick(() => { field.value!.setSelectionRange(selStart, selStart) })\r\n    } else if (ev.key === 'ArrowDown') {\r\n      updateValue(props.modelValue - step)\r\n      ev.preventDefault()\r\n      nextTick(() => { field.value!.setSelectionRange(selStart, selStart) })\r\n    }\r\n  }\r\n}\r\n\r\nfunction updateValue (newValue: string | number) {\r\n  const step = props.step || 1\r\n  newValue = (Math.floor(Number(newValue) / step + 0.5) | 0) * step\r\n  emit('update:modelValue', newValue)\r\n}\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"button\", {\n      onClick: _cache[0] || (_cache[0] = ($event: any) => (step(-1)))\n    }, \"<<\"),\n    _createElementVNode(\"input\", {\n      ref_key: \"field\",\n      ref: field,\n      value: __props.modelValue.toFixed(__props.decimalPrecision || 1),\n      onKeydown: onKeyDown,\n      onChange: _cache[1] || (_cache[1] = e => updateValue((e.target as any).value))\n    }, null, 40, _hoisted_2),\n    _createElementVNode(\"button\", {\n      onClick: _cache[2] || (_cache[2] = ($event: any) => (step(1)))\n    }, \">>\")\n  ]))\n}\n}\n\n})","import script from \"./NumberSpinner.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NumberSpinner.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NumberSpinner.vue?vue&type=style&index=0&id=4a4a9e26&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","export const audioCtx = new (\n  window.AudioContext || // Default\n  (window as any).webkitAudioContext || // Safari and old versions of Chrome\n  false\n)()\n\nfunction readFileArrayBuffer (file: File): Promise<ArrayBuffer> {\n  return new Promise((resolve) => {\n    const reader = new FileReader()\n    reader.onload = function () {\n      const arrayBuffer = reader.result as ArrayBuffer\n      resolve(arrayBuffer)\n    }\n    reader.readAsArrayBuffer(file)\n  })\n}\n\nexport async function getAudioBufferFromFile (file: File): Promise<AudioBuffer> {\n  const arrayBuffer = await readFileArrayBuffer(file)\n  const decodedAudioData = await audioCtx.decodeAudioData(arrayBuffer)\n  return decodedAudioData\n}\n","import { Lane } from '@/gameEnv'\r\nimport { Ref, ref } from 'vue'\r\nimport { KeyLog } from '../KeyLog'\r\n\r\nexport function useKeylog (props: { getCurrentTime: () => number }) {\r\n  const keyLog = ref([]) as Ref<KeyLog>\r\n\r\n  function clearKeyLog () {\r\n    keyLog.value.length = 0\r\n  }\r\n\r\n  function addKeyDown (lane: Lane) {\r\n    const accurateCurrentTime = props.getCurrentTime.call(null)\r\n\r\n    keyLog.value.push({\r\n      timestamp: Date.now(),\r\n      lane,\r\n      keydownTime: accurateCurrentTime,\r\n      keyupTime: null\r\n    })\r\n  }\r\n\r\n  function addKeyUp (lane: Lane) {\r\n    const accurateCurrentTime = props.getCurrentTime.call(null)\r\n    const currentTimestamp = Date.now()\r\n    for (let i = keyLog.value.length - 1; i >= 0; i--) {\r\n      const logEntry = keyLog.value[i]\r\n      if (logEntry.timestamp >= currentTimestamp) break\r\n\r\n      // Note: due to vue's reactivity thing, logEntry.lane may be a proxy to original lane object\r\n      // so comparing lane object itself may lead to comparing proxy to original object (false)\r\n      // We use === on primitive type (typeof lane.name === \"string\")\r\n      if (logEntry.lane.name === lane.name) {\r\n        if (logEntry.keyupTime === null) {\r\n          logEntry.keyupTime = accurateCurrentTime\r\n          return true\r\n        }\r\n        break\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  function closeAllKeylog () {\r\n    for (const keyEntry of keyLog.value) {\r\n      if (keyEntry.keyupTime === null) {\r\n        keyEntry.keyupTime = keyEntry.keydownTime\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    keyLog,\r\n    clearKeyLog,\r\n    addKeyDown,\r\n    addKeyUp,\r\n    closeAllKeylog\r\n  }\r\n}\r\n","import { Ref, ref } from 'vue'\r\n\r\nexport function useBookmarkList (\r\n  props: {\r\n    currentTime: Ref<number>,\r\n    getAudioDuration: () => number\r\n  }\r\n) {\r\n  const bookmarkList = ref([] as number[])\r\n\r\n  function gotoPrevBookmark () {\r\n    if (bookmarkList.value.length === 0) {\r\n      props.currentTime.value = 0\r\n      return\r\n    }\r\n\r\n    for (let i = 0; i < bookmarkList.value.length; i++) {\r\n      if (bookmarkList.value[i] > props.currentTime.value - 1) {\r\n        if (i === 0) props.currentTime.value = 0\r\n        else props.currentTime.value = bookmarkList.value[i - 1]\r\n        return\r\n      }\r\n    }\r\n\r\n    // goto last bookmark.\r\n    props.currentTime.value = bookmarkList.value[bookmarkList.value.length - 1]\r\n  }\r\n\r\n  function gotoNextBookmark () {\r\n    if (bookmarkList.value.length === 0) {\r\n      props.currentTime.value = props.getAudioDuration.call(null)\r\n      return\r\n    }\r\n\r\n    for (let i = bookmarkList.value.length - 1; i >= 0; i--) {\r\n      if (bookmarkList.value[i] < props.currentTime.value) {\r\n        if (i === bookmarkList.value.length - 1) props.currentTime.value = props.getAudioDuration.call(null)\r\n        else props.currentTime.value = bookmarkList.value[i + 1]\r\n        return\r\n      }\r\n    }\r\n\r\n    props.currentTime.value = bookmarkList.value[0]\r\n  }\r\n\r\n  function toggleBookmark () {\r\n    if (bookmarkList.value.length === 0) {\r\n      bookmarkList.value.push(props.currentTime.value)\r\n      return\r\n    }\r\n\r\n    const searchMin = props.currentTime.value - 1.5\r\n    const searchMax = props.currentTime.value + 1.5\r\n    const index = bookmarkList.value.findIndex(x => x <= searchMax && x >= searchMin)\r\n    if (index !== -1) {\r\n      bookmarkList.value.splice(index, 1)\r\n      return\r\n    }\r\n\r\n    bookmarkList.value.push(props.currentTime.value)\r\n    bookmarkList.value.sort((a, b) => a - b)\r\n  }\r\n\r\n  function clearBookmarks () {\r\n    bookmarkList.value.length = 0\r\n  }\r\n\r\n  return {\r\n    bookmarkList,\r\n    gotoPrevBookmark,\r\n    gotoNextBookmark,\r\n    toggleBookmark,\r\n    clearBookmarks\r\n  }\r\n}\r\n","import { PrefIO } from './prefIO'\r\nexport type KeyConfig = { [key: string]: string }\r\n\r\nfunction defaultKeyMap (): { [key: string]: KeyConfig} {\r\n  return {\r\n    djmax_4b: {\r\n      a_0: 'Lane1',\r\n      s_0: 'Lane2',\r\n      ';_0': 'Lane3',\r\n      '\\'_0': 'Lane4',\r\n      shift_1: 'SideL',\r\n      shift_2: 'SideR'\r\n    },\r\n\r\n    djmax_5b: {\r\n      a_0: 'Lane1',\r\n      s_0: 'Lane2',\r\n      d_0: 'Lane3',\r\n      l_0: 'Lane3',\r\n      ';_0': 'Lane4',\r\n      '\\'_0': 'Lane5',\r\n      shift_1: 'SideL',\r\n      shift_2: 'SideR'\r\n    },\r\n\r\n    djmax_6b: {\r\n      a_0: 'Lane1',\r\n      s_0: 'Lane2',\r\n      d_0: 'Lane3',\r\n      l_0: 'Lane4',\r\n      ';_0': 'Lane5',\r\n      '\\'_0': 'Lane6',\r\n      shift_1: 'SideL',\r\n      shift_2: 'SideR'\r\n    },\r\n\r\n    djmax_8b: {\r\n      a_0: 'Lane1',\r\n      s_0: 'Lane2',\r\n      d_0: 'Lane3',\r\n      l_0: 'Lane4',\r\n      ';_0': 'Lane5',\r\n      '\\'_0': 'Lane6',\r\n      c_0: 'TriggerL',\r\n      ',_0': 'TriggerR',\r\n      shift_1: 'SideL',\r\n      shift_2: 'SideR'\r\n    }\r\n  }\r\n}\r\n\r\nexport const keyMapPrefIO = new PrefIO('kKeyMap', defaultKeyMap)\r\n","import { onMounted, onBeforeUnmount } from 'vue'\r\n\r\n/**\r\n * Register key handlers.\r\n *\r\n * Unfortunately keydown / keyup handler cannot be separated...\r\n *  - keydown/keyup handler are NOT guaranteed to be paired 1-1.\r\n *\r\n * @param handlers: keyDown / keyUp Handler\r\n */\r\nexport function useKeyHandler (handlers: {\r\n  keyDown?: (key: string, ev: KeyboardEvent) => boolean,\r\n  keyUp?: (key: string, ev: KeyboardEvent) => boolean,\r\n}) {\r\n  const { keyDown, keyUp } = handlers\r\n\r\n  onMounted(() => {\r\n    document.addEventListener('keydown', keydownListener)\r\n    document.addEventListener('keyup', keyupListener)\r\n  })\r\n\r\n  onBeforeUnmount(() => {\r\n    document.removeEventListener('keydown', keydownListener)\r\n    document.removeEventListener('keyup', keyupListener)\r\n  })\r\n\r\n  const lastRetCache = {} as { [key: string]: boolean }\r\n\r\n  function keydownListener (ev: KeyboardEvent) {\r\n    const keyString = `${ev.key}_${ev.location}`\r\n    let ret = lastRetCache[keyString]\r\n    if (ret === undefined) {\r\n      if (keyDown) ret = keyDown(keyString.toLowerCase(), ev) || false\r\n      else ret = false\r\n    }\r\n    lastRetCache[keyString] = ret\r\n\r\n    if (ret) {\r\n      ev.stopPropagation()\r\n      ev.preventDefault()\r\n    }\r\n  }\r\n\r\n  function keyupListener (ev: KeyboardEvent) {\r\n    const keyString = `${ev.key}_${ev.location}`\r\n\r\n    if (lastRetCache[keyString] === undefined) return\r\n    delete lastRetCache[keyString]\r\n\r\n    if (keyUp) {\r\n      const ret = keyUp(keyString.toLowerCase(), ev)\r\n      if (ret) {\r\n        ev.stopPropagation()\r\n        ev.preventDefault()\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"main-container\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"controller\"\n}\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"spacer\" }, null, -1)\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"spacer\" }, null, -1)\n\nimport { ref, watch, Ref, computed } from 'vue'\r\nimport VideoWithOverlay from './VideoWithOverlay.vue'\r\nimport AudioScrollbar from '@/components/AudioScrollbar.vue'\r\nimport NumberSpinner from '@/components/NumberSpinner.vue'\r\nimport { getAudioBufferFromFile } from '@/utils/extractAudio'\r\nimport { useKeylog } from './useKeylog'\r\nimport { useBookmarkList } from './useBookmarkList'\r\nimport { VideoProps } from '@/pref/VideoProps'\r\nimport { keyMapPrefIO } from '@/pref/KeyConfig'\r\nimport { useKeyHandler } from '@/utils/useKeyHandler'\r\nimport { getGameEnv } from '@/gameEnv'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TrainerView',\n  props: {\n    file: null,\n    videoProps: null,\n    suppressInput: { type: Boolean }\n  },\n  setup(__props: any) {\n\nconst props = __props as {\r\n  file: File\r\n  videoProps: VideoProps\r\n  suppressInput?: boolean\r\n};\n\r\n\r\n\r\nconst videoPlayer = ref(null) as Ref<any>\r\nconst videoUrl = computed(() => URL.createObjectURL(props.file))\r\nconst { keyLog, addKeyDown, addKeyUp, clearKeyLog, closeAllKeylog } = useKeylog({\r\n  getCurrentTime () {\r\n    return videoPlayer.value?.getCurrentVideoTime() || 0\r\n  }\r\n})\r\n\r\n// Controls\r\nconst currentTime = ref(0)\r\nconst playbackRate = ref(1)\r\nconst { bookmarkList, gotoPrevBookmark, gotoNextBookmark, toggleBookmark, clearBookmarks } = useBookmarkList({\r\n  currentTime,\r\n  getAudioDuration () {\r\n    return audioBuffer.value?.duration || 0\r\n  }\r\n})\r\n\r\nuseKeyHandler({\r\n  keyDown (key) {\r\n    if (key.startsWith('f1_')) {\r\n      gotoPrevBookmark()\r\n      return true\r\n    } else if (key.startsWith('f2_')) {\r\n      toggleBookmark()\r\n      return true\r\n    } else if (key.startsWith('f3_')) {\r\n      gotoNextBookmark()\r\n      return true\r\n    } else if (key.startsWith('arrowleft_')) {\r\n      currentTime.value -= 2\r\n      return true\r\n    } else if (key.startsWith('arrowright_')) {\r\n      currentTime.value += 2\r\n      return true\r\n    } else if (key.startsWith('arrowup_')) {\r\n      playbackRate.value += 0.05\r\n      return true\r\n    } else if (key.startsWith('arrowdown_')) {\r\n      playbackRate.value -= 0.05\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n})\r\n\r\n// Keylog\r\nuseKeyHandler({\r\n  keyDown (key) {\r\n    if (props.suppressInput) return false\r\n\r\n    if (key.startsWith('delete_')) {\r\n      clearKeyLog()\r\n      return true\r\n    }\r\n\r\n    const laneKeyMap = keyMapPrefIO.get()[props.videoProps.gameEnvName]\r\n    const laneString = laneKeyMap[key]\r\n    const gameEnv = getGameEnv(props.videoProps)\r\n    const lane = laneString\r\n      ? (\r\n          gameEnv.lanes.find(x => x.name === laneString)\r\n        )\r\n      : undefined\r\n\r\n    if (lane !== undefined) {\r\n      addKeyDown(lane)\r\n      return true\r\n    }\r\n    return false\r\n  },\r\n  keyUp (key) {\r\n    if (props.suppressInput) return false\r\n\r\n    const laneKeyMap = keyMapPrefIO.get()[props.videoProps.gameEnvName]\r\n    const laneString = laneKeyMap[key]\r\n    const gameEnv = getGameEnv(props.videoProps)\r\n    const lane = laneString\r\n      ? (\r\n          gameEnv.lanes.find(x => x.name === laneString)\r\n        )\r\n      : undefined\r\n\r\n    if (lane !== undefined) {\r\n      addKeyUp(lane)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n})\r\n\r\n// //////////////////\r\n// Provide audioBuffer for scollbar\r\nconst audioBuffer = ref(null) as Ref<null | AudioBuffer>\r\nwatch(() => props.file, async () => {\r\n  audioBuffer.value = await getAudioBufferFromFile(props.file)\r\n  clearKeyLog()\r\n  clearBookmarks()\r\n}, { immediate: true })\r\n\r\nfunction updateCurrentTimeWithPercent (playPercent: number) {\r\n  if (audioBuffer.value) {\r\n    currentTime.value = playPercent * audioBuffer.value.duration\r\n    closeAllKeylog()\r\n  }\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(VideoWithOverlay, {\n      ref_key: \"videoPlayer\",\n      ref: videoPlayer,\n      class: \"video-player\",\n      src: _unref(videoUrl),\n      videoProps: __props.videoProps,\n      keyLog: _unref(keyLog),\n      currentTime: currentTime.value,\n      \"onUpdate:currentTime\": _cache[0] || (_cache[0] = ($event: any) => ((currentTime).value = $event)),\n      playbackRate: playbackRate.value\n    }, null, 8, [\"src\", \"videoProps\", \"keyLog\", \"currentTime\", \"playbackRate\"]),\n    (_unref(audioBuffer))\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"button\", {\n            onClick: _cache[1] || (_cache[1] = \n//@ts-ignore\n(...args) => (_unref(clearKeyLog) && _unref(clearKeyLog)(...args))),\n            title: \"Delete\"\n          }, \"Clear\"),\n          _hoisted_3,\n          _createElementVNode(\"span\", null, [\n            _createTextVNode(\" 배속  \"),\n            _createVNode(NumberSpinner, {\n              modelValue: playbackRate.value,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((playbackRate).value = $event)),\n              step: 0.05,\n              \"decimal-precision\": 2\n            }, null, 8, [\"modelValue\", \"step\"])\n          ]),\n          _hoisted_4,\n          _createElementVNode(\"button\", {\n            onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_unref(gotoPrevBookmark) && _unref(gotoPrevBookmark)(...args))),\n            title: \"F1\"\n          }, \"이전 북마크로\"),\n          _createElementVNode(\"button\", {\n            onClick: _cache[4] || (_cache[4] = \n//@ts-ignore\n(...args) => (_unref(toggleBookmark) && _unref(toggleBookmark)(...args))),\n            title: \"F2\"\n          }, \"위치 저장/취소\"),\n          _createElementVNode(\"button\", {\n            onClick: _cache[5] || (_cache[5] = \n//@ts-ignore\n(...args) => (_unref(gotoNextBookmark) && _unref(gotoNextBookmark)(...args))),\n            title: \"F3\"\n          }, \"다음 북마크로\")\n        ]))\n      : _createCommentVNode(\"\", true),\n    (_unref(audioBuffer))\n      ? (_openBlock(), _createBlock(AudioScrollbar, {\n          key: 1,\n          class: \"music-scroll\",\n          title: __props.file.name,\n          \"audio-buffer\": _unref(audioBuffer),\n          playPercent: currentTime.value / _unref(audioBuffer).duration,\n          \"mark-list\": _unref(bookmarkList).map(x => x / _unref(audioBuffer)!.duration),\n          \"onUpdate:playPercent\": updateCurrentTimeWithPercent\n        }, null, 8, [\"title\", \"audio-buffer\", \"playPercent\", \"mark-list\"]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","import script from \"./TrainerView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TrainerView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TrainerView.vue?vue&type=style&index=0&id=43b55a0f&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","export type GameEnvName = (\r\n  'djmax_4b' |\r\n  'djmax_5b' |\r\n  'djmax_6b' |\r\n  'djmax_8b'\r\n)\r\n\r\nexport type GearPos = (\r\n  'left' |\r\n  'center' |\r\n  'right'\r\n)\r\n\r\nexport function checkGameEnvName (name: string): GameEnvName | null {\r\n  switch (name) {\r\n    case 'djmax_4b':\r\n    case 'djmax_5b':\r\n    case 'djmax_6b':\r\n    case 'djmax_8b':\r\n      return name\r\n    default:\r\n      return null\r\n  }\r\n}\r\n","import { checkGameEnvName, GameEnvName, GearPos } from '@/gameEnv/list'\r\nimport { merge } from 'lodash-es'\r\n\r\nexport interface VideoProps {\r\n  noteSpeedMultiplier: number\r\n  gameEnvName: GameEnvName\r\n  gearPos: GearPos\r\n  audioSync: number\r\n}\r\n\r\nexport function createDefaultVideoProps (gameEnvName_: string): VideoProps {\r\n  const gameEnvName = checkGameEnvName(gameEnvName_)\r\n  if (!gameEnvName) throw new Error(`Invalid env name ${gameEnvName}`)\r\n\r\n  return {\r\n    noteSpeedMultiplier: 5.4,\r\n    gearPos: 'center',\r\n    gameEnvName,\r\n    audioSync: 0\r\n  }\r\n}\r\n\r\nexport function loadFileVideoProps (filename: string): {\r\n  props: VideoProps,\r\n  isNew?: boolean\r\n} {\r\n  const s = localStorage.getItem('videoProps_' + filename)\r\n  if (s) {\r\n    const obj = JSON.parse(s) as VideoProps\r\n    try {\r\n      return {\r\n        props: merge(\r\n          createDefaultVideoProps(obj.gameEnvName),\r\n          obj\r\n        )\r\n      }\r\n    } catch (e) {\r\n      console.error('Error loading previous videoprops, resetting...', e)\r\n    }\r\n  }\r\n\r\n  const keyCount = Number(prompt('Key Count') || '6')\r\n  const envName = `djmax_${keyCount}b`\r\n  return {\r\n    props: createDefaultVideoProps(envName),\r\n    isNew: true\r\n  }\r\n}\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"키 입력 세팅\", -1)\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = { key: 1 }\n\nimport { useKeyHandler } from '@/utils/useKeyHandler'\r\nimport { keyMapPrefIO } from '@/pref/KeyConfig'\r\nimport { computed, ref, watch } from 'vue'\r\nimport { getGameEnv } from '@/gameEnv'\r\nimport { VideoProps } from '@/pref/VideoProps'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'KeyConfigEditor',\n  props: {\n    videoProps: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\r\n  videoProps: VideoProps,\r\n};\n\r\n\r\n\r\nconst gameEnv = computed(() => getGameEnv(props.videoProps))\r\n\r\nwatch(() => props.videoProps, () => {\r\n  index.value = 0\r\n})\r\n\r\nconst index = ref(0)\r\nconst showLaneKeyConfig = ref(false)\r\nconst keys = ref([] as string[])\r\n\r\nfunction showKeyConfig () {\r\n  index.value = 0\r\n  keys.value.length = 0\r\n  showLaneKeyConfig.value = true\r\n}\r\n\r\nfunction resetKeyConfig () {\r\n  if (confirm('키 설정을 전부 초기화하시겠습니까?')) {\r\n    keyMapPrefIO.clear()\r\n  }\r\n}\r\n\r\nfunction cancel () {\r\n  showLaneKeyConfig.value = false\r\n}\r\n\r\nfunction ok () {\r\n  if (!gameEnv.value) return\r\n\r\n  const lanes = gameEnv.value.lanes\r\n  if (index.value !== lanes.length) {\r\n    alert('not all keys filled')\r\n    return\r\n  }\r\n\r\n  const result = {} as { [key: string]: string }\r\n  for (let i = 0; i < lanes.length; i++) {\r\n    result[keys.value[i]] = lanes[i].name\r\n  }\r\n  keyMapPrefIO.get()[props.videoProps.gameEnvName] = result\r\n  showLaneKeyConfig.value = false\r\n}\r\nuseKeyHandler({\r\n  keyDown (key) {\r\n    if (!showLaneKeyConfig.value) return false\r\n    if (!gameEnv.value) return false\r\n\r\n    if (index.value >= gameEnv.value.lanes.length) return false\r\n    keys.value[index.value++] = key\r\n    return true\r\n  }\r\n})\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (showLaneKeyConfig.value && _unref(gameEnv))\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"ul\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(gameEnv).lanes.length, (_, i) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: i }, _toDisplayString(_unref(gameEnv).lanes[i].name) + \": \" + _toDisplayString(keys.value[i] || '(unassigned)'), 1))\n          }), 128))\n        ]),\n        _createElementVNode(\"button\", { onClick: cancel }, \"Cancel\"),\n        _createElementVNode(\"button\", {\n          onClick: ok,\n          disabled: index.value < _unref(gameEnv).lanes.length\n        }, \"OK\", 8, _hoisted_3)\n      ]))\n    : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", { onClick: showKeyConfig }, \"키 입력 설정\"),\n        _createElementVNode(\"button\", { onClick: resetKeyConfig }, \"키 입력 전체 재설정\")\n      ]))\n}\n}\n\n})","import script from \"./KeyConfigEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./KeyConfigEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, unref as _unref, toDisplayString as _toDisplayString, createBlock as _createBlock, vShow as _vShow } from \"vue\"\n\nconst _hoisted_1 = { class: \"app-container\" }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"i\", { class: \"fa-solid fa-gear\" }, null, -1)\nconst _hoisted_3 = [\n  _hoisted_2\n]\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"i\", { class: \"fa-solid fa-file-import\" }, null, -1)\nconst _hoisted_5 = { class: \"sidebar-left\" }\nconst _hoisted_6 = {\n  key: 0,\n  class: \"videoprops\"\n}\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"tr\", null, [\n  /*#__PURE__*/_createElementVNode(\"th\", { colspan: \"2\" }, \"영상 설정\")\n], -1)\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"td\", null, \"게임 종류\", -1)\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"option\", { value: \"djmax_4b\" }, \"DJMAX 4b\", -1)\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"option\", { value: \"djmax_5b\" }, \"DJMAX 5b\", -1)\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"option\", { value: \"djmax_6b\" }, \"DJMAX 6b\", -1)\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"option\", { value: \"djmax_8b\" }, \"DJMAX 8b\", -1)\nconst _hoisted_13 = [\n  _hoisted_9,\n  _hoisted_10,\n  _hoisted_11,\n  _hoisted_12\n]\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"td\", null, \"배속\", -1)\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"td\", null, \"기어 위치\", -1)\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"td\", null, \"비디오-오디오 싱크\", -1)\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1)\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"tr\", null, [\n  /*#__PURE__*/_createElementVNode(\"th\", { colspan: \"2\" }, \"프로그램 설정\")\n], -1)\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"td\", null, \"오디오/키보드 지연시간\", -1)\nconst _hoisted_20 = { colspan: \"2\" }\nconst _hoisted_21 = { key: 0 }\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1)\nconst _hoisted_23 = { class: \"main\" }\nconst _hoisted_24 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa-solid fa-file-import\",\n  title: \"동영상 불러오기\"\n}, null, -1)\nconst _hoisted_25 = [\n  _hoisted_24\n]\n\nimport { Ref, ref, watch } from 'vue'\r\n\r\nimport TrainerView from '@/trainerView/TrainerView.vue'\r\nimport NumberSpinner from '@/components/NumberSpinner.vue'\r\nimport { loadFileVideoProps, VideoProps } from '@/pref/VideoProps'\r\nimport { colorPrefIO, ColorKey } from '@/pref/ColorPref'\r\nimport { audioLatencyIO } from '@/pref/AudioLatency'\r\nimport KeyConfigEditor from './components/KeyConfigEditor.vue'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\r\nconst { Compact } = require('@ckpack/vue-color')\r\n\r\n// Test video settings\r\n// from https://www.youtube.com/watch?v=1qxsQDrVcDY\r\nconst videoProps: Ref<null | VideoProps> = ref(null)\r\nconst file = ref(null) as Ref<null | File>\r\nconst fileInput = ref(null) as Ref<null | HTMLInputElement>\r\nconst showSidebar = ref(false)\r\nconst showColorPrefs = ref(false)\r\nconst colorPref = colorPrefIO.get()\r\n\r\nfunction onSidebarClick () {\r\n  showSidebar.value = !showSidebar.value\r\n}\r\n\r\nfunction fileSelect () {\r\n  fileInput.value?.click()\r\n}\r\n\r\nasync function onFileSelect (e: Event) {\r\n  const element = e.currentTarget as HTMLInputElement\r\n  const fileList: FileList | null = element.files\r\n  if (fileList) {\r\n    const v = document.createElement('video')\r\n    v.preload = 'metadata'\r\n    v.src = URL.createObjectURL(fileList[0])\r\n    v.addEventListener('loadedmetadata', () => {\r\n      file.value = fileList[0]\r\n\r\n      const { props, isNew } = loadFileVideoProps(file.value.name)\r\n      videoProps.value = props\r\n      if (isNew) showSidebar.value = true\r\n    })\r\n  }\r\n}\r\n\r\nfunction resetVideoProps () {\r\n  if (file.value) {\r\n    localStorage.removeItem('videoProps_' + file.value.name)\r\n    const v = document.createElement('video')\r\n    v.preload = 'metadata'\r\n    v.src = URL.createObjectURL(file.value)\r\n    v.addEventListener('loadedmetadata', () => {\r\n      const { props, isNew } = loadFileVideoProps(file.value!.name)\r\n      videoProps.value = props\r\n      if (isNew) showSidebar.value = true\r\n    })\r\n  } else {\r\n    alert('Load file first!')\r\n  }\r\n}\r\n\r\nwatch(videoProps, () => {\r\n  if (!file.value || !videoProps.value) return\r\n  localStorage.setItem('videoProps_' + file.value.name, JSON.stringify(videoProps.value))\r\n}, { deep: true })\r\n\r\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"app-button button-config\",\n      onClick: onSidebarClick,\n      title: \"플레이어 설정\"\n    }, _hoisted_3),\n    _createElementVNode(\"div\", {\n      class: \"app-button button-loadfile\",\n      onClick: fileSelect,\n      title: \"비디오 파일 선택\"\n    }, [\n      _hoisted_4,\n      _createElementVNode(\"input\", {\n        ref_key: \"fileInput\",\n        ref: fileInput,\n        type: \"file\",\n        name: \"select\",\n        onChange: onFileSelect\n      }, null, 544)\n    ]),\n    _withDirectives(_createElementVNode(\"aside\", _hoisted_5, [\n      (videoProps.value)\n        ? (_openBlock(), _createElementBlock(\"table\", _hoisted_6, [\n            _hoisted_7,\n            _createElementVNode(\"tr\", null, [\n              _hoisted_8,\n              _createElementVNode(\"td\", null, [\n                _withDirectives(_createElementVNode(\"select\", {\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((videoProps.value.gameEnvName) = $event))\n                }, _hoisted_13, 512), [\n                  [_vModelSelect, videoProps.value.gameEnvName]\n                ])\n              ])\n            ]),\n            _createElementVNode(\"tr\", null, [\n              _hoisted_14,\n              _createElementVNode(\"td\", null, [\n                _createVNode(NumberSpinner, {\n                  modelValue: videoProps.value.noteSpeedMultiplier,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((videoProps.value.noteSpeedMultiplier) = $event)),\n                  step: 0.1\n                }, null, 8, [\"modelValue\", \"step\"])\n              ])\n            ]),\n            _createElementVNode(\"tr\", null, [\n              _hoisted_15,\n              _createElementVNode(\"td\", null, [\n                _createElementVNode(\"button\", {\n                  onClick: _cache[2] || (_cache[2] = ($event: any) => (videoProps.value!.gearPos = 'left'))\n                }, \"왼쪽\"),\n                _createTextVNode(\"  \"),\n                _createElementVNode(\"button\", {\n                  onClick: _cache[3] || (_cache[3] = ($event: any) => (videoProps.value!.gearPos = 'center'))\n                }, \"중앙\"),\n                _createTextVNode(\"  \"),\n                _createElementVNode(\"button\", {\n                  onClick: _cache[4] || (_cache[4] = ($event: any) => (videoProps.value!.gearPos = 'right'))\n                }, \"오른쪽\")\n              ])\n            ]),\n            _createElementVNode(\"tr\", null, [\n              _hoisted_16,\n              _createElementVNode(\"td\", null, [\n                _createVNode(NumberSpinner, {\n                  modelValue: videoProps.value.audioSync,\n                  \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((videoProps.value.audioSync) = $event)),\n                  step: 0.01,\n                  \"decimal-precision\": 2\n                }, null, 8, [\"modelValue\", \"step\"])\n              ])\n            ]),\n            _createElementVNode(\"tr\", null, [\n              _createElementVNode(\"td\", {\n                colspan: \"2\",\n                class: \"text-right\"\n              }, [\n                _createElementVNode(\"button\", { onClick: resetVideoProps }, \"영상 설정 초기화\")\n              ])\n            ])\n          ]))\n        : _createCommentVNode(\"\", true),\n      _hoisted_17,\n      _createElementVNode(\"table\", null, [\n        _hoisted_18,\n        _createElementVNode(\"tr\", null, [\n          _hoisted_19,\n          _createElementVNode(\"td\", null, [\n            _createVNode(NumberSpinner, {\n              modelValue: _unref(audioLatencyIO).get(),\n              \"onUpdate:modelValue\": _cache[6] || (_cache[6] = v => _unref(audioLatencyIO).set(v)),\n              step: 0.01,\n              \"decimal-precision\": 2\n            }, null, 8, [\"modelValue\", \"step\"])\n          ])\n        ]),\n        _createElementVNode(\"tr\", null, [\n          _createElementVNode(\"td\", _hoisted_20, [\n            _createElementVNode(\"span\", {\n              onClick: _cache[7] || (_cache[7] = ($event: any) => (showColorPrefs.value = !showColorPrefs.value))\n            }, \"노트 색상 설정 \" + _toDisplayString(showColorPrefs.value ? \"▲\" : \"▼\"), 1),\n            (showColorPrefs.value)\n              ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_21, [\n                  _createElementVNode(\"li\", null, [\n                    _createTextVNode(\"숫자 노트 색상: \"),\n                    _createVNode(_unref(Compact), {\n                      modelValue: _unref(colorPref)[_unref(ColorKey).Number],\n                      \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => (_unref(colorPref)[_unref(ColorKey).Number] = $event.rgba)),\n                      disableAlpha: true\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _createElementVNode(\"li\", null, [\n                    _createTextVNode(\"사이드 노트 색상: \"),\n                    _createVNode(_unref(Compact), {\n                      modelValue: _unref(colorPref)[_unref(ColorKey).Side],\n                      \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => (_unref(colorPref)[_unref(ColorKey).Side] = $event.rgba)),\n                      disableAlpha: true\n                    }, null, 8, [\"modelValue\"])\n                  ]),\n                  _createElementVNode(\"li\", null, [\n                    _createTextVNode(\"트리거 노트 색상: \"),\n                    _createVNode(_unref(Compact), {\n                      modelValue: _unref(colorPref)[_unref(ColorKey).Trigger],\n                      \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => (_unref(colorPref)[_unref(ColorKey).Trigger] = $event.rgba)),\n                      disableAlpha: true\n                    }, null, 8, [\"modelValue\"])\n                  ])\n                ]))\n              : _createCommentVNode(\"\", true)\n          ])\n        ])\n      ]),\n      _hoisted_22,\n      (videoProps.value)\n        ? (_openBlock(), _createBlock(KeyConfigEditor, {\n            key: 1,\n            \"video-props\": videoProps.value\n          }, null, 8, [\"video-props\"]))\n        : _createCommentVNode(\"\", true)\n    ], 512), [\n      [_vShow, showSidebar.value]\n    ]),\n    _createElementVNode(\"div\", _hoisted_23, [\n      (_unref(file) && videoProps.value)\n        ? (_openBlock(), _createBlock(TrainerView, {\n            key: 0,\n            file: _unref(file),\n            videoProps: videoProps.value\n          }, null, 8, [\"file\", \"videoProps\"]))\n        : (_openBlock(), _createElementBlock(\"div\", {\n            key: 1,\n            class: \"main-load-file\",\n            onClick: fileSelect\n          }, _hoisted_25))\n    ])\n  ]))\n}\n}\n\n})","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1d14ae6a&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport './style.scss'\r\n\r\ncreateApp(App)\r\n  .mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkrhythmvideotrainer\"] = self[\"webpackChunkrhythmvideotrainer\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(478); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["registerResizeWatcher","elementRef","handler","ro","ref","onResize","onMounted","ob","ResizeObserver","observe","value","onBeforeUnmount","unobserve","ioKeySet","Set","PrefIO","constructor","prefKey","defaultConstructor","this","pref","_load","watch","v","localStorage","setItem","JSON","stringify","deep","has","Error","add","getItem","defaultValue","call","merge","parse","get","clear","removeItem","set","newPref","audioLatencyIO","ColorKey","defaultColorPref","Number","r","g","b","a","Trigger","Side","colorPrefIO","playAreaWidth","judgementLinePosY","judgementLinePosX","pos","calcY","videoProps","videoTime","noteTime","yPerSecond","noteSpeedMultiplier","createNumberLane","index1","keyCount","noteSizeW","name","x","gearPos","y","w","color","createSideLane","direction","index0","createTriggerLane","djmaxLanes8b","judgementLinePos","lanes","djmaxLanes6b","djmaxLanes5b","djmaxLanes4b","getGameEnv","props","gameEnvName","updateNoteOverlayCanvas","videoElement","targetCanvas","videoProps_","keyLog_","toRaw","keyLog","ctx","getContext","width","height","currentTime","audioSync","gameEnv","perfectRange","perfectY","clearRect","oldTransform","getTransform","setTransform","scale","fillStyle","rect","fill","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","keyEntry","lane","keydownY","keydownTime","keyupY","keyupTime","keydownPos","noteColorString","noteColorRGB","tinycolor","toRgb","rectX","rectW","closePath","trailW","crossPlatformRequestVideoFrameCallback","videoEl","cb","requestVideoFrameCallback","requestAnimationFrame","crossPlatformCancelVideoFrameCallback","reqId","cancelVideoFrameCallback","cancelAnimationFrame","useVideoFrameCallback","onVideoFrame","videoIntervalHandle","_hoisted_1","_defineComponent","__name","src","playbackRate","emits","setup","__props","expose","emit","root","video","overlayCanvas","resizeOverlayCanvas","readyState","canvas","videoWidth","videoHeight","getClientRects","properZoom","Math","min","properWidth","properHeight","style","pause","immediate","playbackStartTime","Date","now","newValue","newPlaybackStartTime","abs","play","adjustPlayStartTime","updateCurrentTime","paused","seeking","getCurrentVideoTime","onUnmounted","_ctx","_cache","_openBlock","_createElementBlock","ref_key","class","_createElementVNode","onTimeupdate","onLoadedmetadata","__exports__","getDevicePixelRatio","window","devicePixelRatio","resizeCanvasDPIAware","size","dpr","properW","properH","resetTransform","title","audioBuffer","playPercent","markList","toRefs","waveformCanvas","renderCanvas","channel0","getChannelData","length","scrollWidth","scrollHeight","imageData","createImageData","index","data","startIndex","endIndex","intervalSamples","slice","maxSample","minSample","sample","intervalLength","q1Index","quickselect","q1Sample","q3Index","q3Sample","maxSampleY","minSampleY","iy","q3SampleY","q1SampleY","putImageData","rerenderWatcher","computed","renderOverlay","fillRect","markWidth","mark","font","textBaseline","fillText","onClick","event","offsetX","_hoisted_2","modelValue","step","decimalPrecision","field","multiplier","updateValue","onKeyDown","ev","key","startsWith","stopPropagation","selStart","max","selectionStart","periodPos","indexOf","pow","preventDefault","nextTick","setSelectionRange","floor","$event","toFixed","onKeydown","onChange","e","target","audioCtx","AudioContext","webkitAudioContext","readFileArrayBuffer","file","Promise","resolve","reader","FileReader","onload","arrayBuffer","result","readAsArrayBuffer","async","getAudioBufferFromFile","decodedAudioData","decodeAudioData","useKeylog","clearKeyLog","addKeyDown","accurateCurrentTime","getCurrentTime","push","timestamp","addKeyUp","currentTimestamp","i","logEntry","closeAllKeylog","useBookmarkList","bookmarkList","gotoPrevBookmark","gotoNextBookmark","getAudioDuration","toggleBookmark","searchMin","searchMax","findIndex","sort","splice","clearBookmarks","defaultKeyMap","djmax_4b","a_0","s_0","shift_1","shift_2","djmax_5b","d_0","l_0","djmax_6b","djmax_8b","c_0","keyMapPrefIO","useKeyHandler","handlers","keyDown","keyUp","document","addEventListener","keydownListener","keyupListener","removeEventListener","lastRetCache","keyString","location","ret","undefined","toLowerCase","_hoisted_3","_hoisted_4","suppressInput","type","Boolean","videoPlayer","videoUrl","URL","createObjectURL","duration","laneKeyMap","laneString","find","updateCurrentTimeWithPercent","_createVNode","VideoWithOverlay","_unref","args","_createTextVNode","NumberSpinner","_createCommentVNode","_createBlock","AudioScrollbar","map","checkGameEnvName","createDefaultVideoProps","gameEnvName_","loadFileVideoProps","filename","s","obj","console","error","prompt","envName","isNew","showLaneKeyConfig","keys","showKeyConfig","resetKeyConfig","confirm","cancel","ok","alert","_Fragment","_renderList","_","_toDisplayString","disabled","_hoisted_5","_hoisted_6","_hoisted_7","colspan","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","Compact","require","fileInput","showSidebar","showColorPrefs","colorPref","onSidebarClick","fileSelect","click","onFileSelect","element","currentTarget","fileList","files","createElement","preload","resetVideoProps","_withDirectives","_vModelSelect","rgba","disableAlpha","KeyConfigEditor","_vShow","TrainerView","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","every","n","getter","__esModule","d","definition","o","defineProperty","enumerable","globalThis","Function","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}