(function(){"use strict";var e={478:function(e,t,n){var a=n(9242),l=n(3396),o=n(4870),r=n(7139);function i(e,t){const n=(0,o.iH)(null);function a(){t()}(0,l.bv)((()=>{const l=new ResizeObserver(a);l.observe(e.value),n.value=l,t()})),(0,l.Jd)((()=>{n.value?.unobserve(e.value)}))}var u=n(7327),s=n(9519);const c=new Set;class d{constructor(e,t){if((0,u.Z)(this,"prefKey",void 0),(0,u.Z)(this,"pref",void 0),(0,u.Z)(this,"defaultConstructor",void 0),this.prefKey=e,this.defaultConstructor=t,this.pref=(0,o.iH)(this._load()),(0,l.YP)(this.pref,(e=>{localStorage.setItem(this.prefKey,JSON.stringify(e))}),{deep:!0}),c.has(e))throw new Error("Duplicate prefKey");c.add(e)}_load(){const e=localStorage.getItem(this.prefKey),t=this.defaultConstructor.call(null);return e?(0,s.Z)(t,JSON.parse(e)):t}get(){return this.pref.value}clear(){this.pref.value=this.defaultConstructor.call(null),localStorage.removeItem(this.prefKey)}set(e){this.pref.value=e,localStorage.setItem(this.prefKey,JSON.stringify(this.pref.value))}}const v=new d("kAudioLatency",(()=>0));var f,m=n(5082);function p(){return{[f.Number]:{r:204,g:204,b:204,a:1},[f.Trigger]:{r:254,g:146,b:0,a:1},[f.Side]:{r:164,g:221,b:0,a:1}}}(function(e){e[e["Number"]=0]="Number",e[e["Trigger"]=1]="Trigger",e[e["Side"]=2]="Side"})(f||(f={}));const g=new d("kColorPref",p),h=.26042,_=.6963;function y(e){switch(e){case"left":return.037;case"center":return.369;case"right":return.701}}function k(e,t,n){const a=.25648*e.noteSpeedMultiplier;return _-a*(n-t)}function b(e,t){let n=h;switch(t){case 4:n/=4;break;case 5:n/=5;break;case 6:case 8:n/=6;break;default:throw new Error("Bad keyCount")}return{name:`Lane${e}`,pos(t,a,l){return{x:n*(e-1)+y(t.gearPos),y:k(t,a,l),w:n}},color(){return g.get()[f.Number]}}}function w(e,t){return{name:`Side${e}`,pos(e,n,a){return{x:h/2*t+y(e.gearPos),y:k(e,n,a),w:h/2}},color(){return g.get()[f.Side]}}}function S(e,t){return{name:`Trigger${e}`,pos(e,n,a){return{x:h/2*t+y(e.gearPos),y:k(e,n,a),w:h/2}},color(){return g.get()[f.Trigger]}}}function T(e){return{name:"djmax_8b",playAreaWidth:h,judgementLinePos:{x:y(e),y:_},lanes:[b(1,8),b(2,8),b(3,8),b(4,8),b(5,8),b(6,8),w("L",0),w("R",1),S("L",0),S("R",1)]}}function P(e){return{name:"djmax_6b",playAreaWidth:h,judgementLinePos:{x:y(e),y:_},lanes:[b(1,6),b(2,6),b(3,6),b(4,6),b(5,6),b(6,6),w("L",0),w("R",1)]}}function L(e){return{name:"djmax_5b",playAreaWidth:h,judgementLinePos:{x:y(e),y:_},lanes:[b(1,5),b(2,5),b(3,5),b(4,5),b(5,5),w("L",0),w("R",1)]}}function U(e){return{name:"djmax_4b",playAreaWidth:h,judgementLinePos:{x:y(e),y:_},lanes:[b(1,4),b(2,4),b(3,4),b(4,4),w("L",0),w("R",1)]}}function x(e){switch(e.gameEnvName){case"djmax_4b":return U(e.gearPos);case"djmax_5b":return L(e.gearPos);case"djmax_6b":return P(e.gearPos);case"djmax_8b":return T(e.gearPos)}}function C(e,t,n,a){const l=(0,o.IU)(n),r=(0,o.IU)(a),i=t.getContext("2d"),{width:u,height:s}=t,c=e.currentTime+l.audioSync+v.get(),d=x(l),{judgementLinePos:f}=d,p=.25648*l.noteSpeedMultiplier,g=.042,h=g*p;i.clearRect(0,0,u,s);const _=i.getTransform();i.setTransform(1,0,0,1,0,0),i.scale(u,s),i.fillStyle="#000000e0",i.rect(0,0,f.x,1),i.rect(f.x+d.playAreaWidth,0,1,1),i.fill(),i.strokeStyle="blue",i.lineWidth=.001,i.beginPath(),i.moveTo(f.x,0),i.lineTo(f.x,1),i.moveTo(f.x+d.playAreaWidth,0),i.lineTo(f.x+d.playAreaWidth,1),i.moveTo(f.x,f.y),i.lineTo(f.x+d.playAreaWidth,f.y),i.stroke();for(const o of r){const{lane:e}=o,t=e.pos(l,c,o.keydownTime).y,n=e.pos(l,c,o.keyupTime||c).y;if(t<-h||n>1+h)continue;const a=e.pos(l,c,o.keydownTime),r=e.color(),u=(0,m.Z)(r).toRgb(),{x:s,w:d}=a;i.fillStyle=`rgba(${u.r}, ${u.g}, ${u.b}, 0.8)`,i.beginPath(),i.moveTo(s+d/2,t-h/2),i.lineTo(s,t),i.lineTo(s+d/2,t+h/2),i.lineTo(s+d,t),i.closePath(),i.fill();const v=.12*d;i.fillStyle=`rgba(${u.r}, ${u.g}, ${u.b}, 0.2)`,i.beginPath(),i.rect(s+d/2-v/2,n,v,t-n),i.fill()}i.setTransform(_)}function D(e,t){return e.requestVideoFrameCallback?e.requestVideoFrameCallback(t):requestAnimationFrame(t)}function j(e,t){return e.cancelVideoFrameCallback?e.cancelVideoFrameCallback(t):cancelAnimationFrame(t)}function V(e,t){let n=null;function a(){e.value&&(n=D(e.value,a),t())}(0,l.bv)((()=>{e.value&&(n=D(e.value,a))})),(0,l.Jd)((()=>{n&&(e.value&&j(e.value,n),n=null)}))}const A=["src"];var R=(0,l.aZ)({__name:"VideoWithOverlay",props:{src:null,currentTime:null,playbackRate:null,videoProps:null,keyLog:null},emits:["update:currentTime"],setup(e,{expose:t,emit:n}){const a=e,r=(0,o.iH)(null),u=(0,o.iH)(null),s=(0,o.iH)(null);function c(){if(!u.value)return;if(u.value.readyState<1)return;const e=s.value;if(!e)return;const{videoWidth:t,videoHeight:n}=u.value,a=r.value.getClientRects()[0],l=Math.min(a.width/t,a.height/n),o=t*l+"px",i=n*l+"px";e.watch===t&&e.height===n&&e.style.width===o&&e.style.height===i||(e.width=t,e.height=n,e.style.width=o,e.style.height=i)}i(r,c),V(u,(()=>{c(),u.value&&s.value&&C(u.value,s.value,a.videoProps,a.keyLog)})),(0,l.YP)((()=>a.src),(()=>{u.value?.pause()}),{immediate:!0});const d=(0,o.iH)(Date.now()/1e3);(0,l.YP)((()=>a.currentTime),(e=>{if(u.value){const t=Date.now()/1e3-e/a.playbackRate;if(Math.abs(t-d.value)<.05)return;d.value=t,u.value.currentTime=a.currentTime,u.value.playbackRate=a.playbackRate,u.value.play()}})),(0,l.YP)((()=>a.playbackRate),(e=>{u.value&&(u.value.playbackRate=e,m())}));const v=(0,o.iH)(0);function f(){u.value&&(u.value.paused||u.value.seeking?n("update:currentTime",u.value.currentTime):n("update:currentTime",(Date.now()/1e3-d.value)*a.playbackRate)),v.value=requestAnimationFrame(f)}function m(){u.value&&(d.value=Date.now()/1e3-u.value.currentTime/a.playbackRate)}return t({getCurrentVideoTime(){return u.value.currentTime}}),(0,l.bv)((()=>{u.value.src=a.src,v.value=requestAnimationFrame(f)})),(0,l.Ah)((()=>{cancelAnimationFrame(v.value)})),(t,n)=>((0,l.wg)(),(0,l.iD)("div",{ref_key:"root",ref:r,class:"video-container"},[(0,l._)("video",{ref_key:"video",ref:u,src:e.src,onTimeupdate:m,onLoadedmetadata:c},null,40,A),(0,l._)("canvas",{ref_key:"overlayCanvas",ref:s},null,512)],512))}});const W=R;var H=W,N=n(2001);function O(){return window.devicePixelRatio||1}function E(e,t){const n=O(),a=t.width*n|0,l=t.height*n|0;if(e.width!==a||e.height!==l){e.width=a,e.height=l;const t=e.getContext("2d");t.resetTransform(),t.scale(n,n)}}const K={class:"canvas-container"};var F=(0,l.aZ)({__name:"AudioScrollbar",props:{title:null,audioBuffer:null,playPercent:null,markList:null},emits:["update:playPercent"],setup(e,{emit:t}){const n=e,{audioBuffer:a,playPercent:r}=(0,o.BK)(n),u=(0,o.iH)(null),s=(0,o.iH)(null);function c(){const e=a.value.getChannelData(0),{length:t}=e,n=u.value;let{scrollWidth:l,scrollHeight:o}=n;const r=O();l=l*r|0,o=o*r|0,n.width===l&&n.height===o||(n.width=l,n.height=o);const i=u.value.getContext("2d"),s=i.createImageData(l,o);for(let a=0;a<l*o*4;a+=4)s.data[a+0]=25,s.data[a+1]=25,s.data[a+2]=25,s.data[a+3]=204;for(let a=0;a<l;a++){const n=a*t/l|0,r=(a+1)*t/l|0,i=e.slice(n,r);let u=-1,c=1;for(const e of i)u<e&&(u=e),c>e&&(c=e);const d=i.length,v=1*d/4|0;(0,N.Z)(i,v);const f=i[v],m=3*d/4|0;(0,N.Z)(i,m);const p=i[m],g=(1-(u+1)/2)*(o-1)+.5|0,h=(1-(c+1)/2)*(o-1)+.5|0;for(let e=g;e<=h;e++){const t=4*(e*l+a);s.data[t+0]=114,s.data[t+1]=114,s.data[t+2]=114}const _=(1-(p+1)/2)*(o-1)+.5|0,y=(1-(f+1)/2)*(o-1)+.5|0;for(let e=_;e<=y;e++){const t=4*(e*l+a);s.data[t+0]=168,s.data[t+1]=168,s.data[t+2]=168}}i.putImageData(s,0,0)}(0,l.bv)(c),(0,l.YP)(a,c);const d=(0,l.Fl)((()=>[r.value,n.markList]));function v(){const e=s.value;if(e){const{scrollWidth:t,scrollHeight:a}=e;E(e,{width:t,height:a});const l=e.getContext("2d");l.fillStyle="rgba(0, 0, 0, 0)",l.clearRect(0,0,t,a),l.fillStyle="#C5813180",l.fillRect(0,0,t*r.value,a);const o=3;l.fillStyle="#FF4343CC";for(const e of n.markList)l.fillRect(e*t-o/2,0,o,a);l.fillStyle="white",l.font="16px Pretendard Variable",l.textBaseline="middle",l.fillText(n.title,20,15)}}function f(e){const n=s.value;t("update:playPercent",e.offsetX/n.scrollWidth)}function m(){c(),v()}return(0,l.bv)(v),(0,l.YP)(d,v),i(u,m),(e,t)=>((0,l.wg)(),(0,l.iD)("div",K,[(0,l._)("canvas",{ref_key:"waveformCanvas",ref:u},null,512),(0,l._)("canvas",{ref_key:"overlayCanvas",ref:s,onClick:f},null,512)]))}});const M=F;var I=M;const B={class:"spinner-container"},$=["value"];var Z=(0,l.aZ)({__name:"NumberSpinner",props:{modelValue:null,step:null,decimalPrecision:null},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,a=(0,o.iH)(null);function r(e){u(n.modelValue+(n.step||1)*e)}function i(e){if(a.value&&e.key.startsWith("Arrow")){e.stopPropagation();const t=Math.max(a.value.selectionStart||1,1),o=a.value.value,r=0===n.decimalPrecision?o.length:o.indexOf(".");let i;i=t<=r?Math.pow(10,r-t):Math.pow(10,r-t+1),"ArrowUp"===e.key?(u(n.modelValue+i),e.preventDefault(),(0,l.Y3)((()=>{a.value.setSelectionRange(t,t)}))):"ArrowDown"===e.key&&(u(n.modelValue-i),e.preventDefault(),(0,l.Y3)((()=>{a.value.setSelectionRange(t,t)})))}}function u(e){const a=n.step||1;e=(0|Math.floor(Number(e)/a+.5))*a,t("update:modelValue",e)}return(t,n)=>((0,l.wg)(),(0,l.iD)("div",B,[(0,l._)("button",{onClick:n[0]||(n[0]=e=>r(-1))},"<<"),(0,l._)("input",{ref_key:"field",ref:a,value:e.modelValue.toFixed(e.decimalPrecision||1),onKeydown:i,onChange:n[1]||(n[1]=e=>u(e.target.value))},null,40,$),(0,l._)("button",{onClick:n[2]||(n[2]=e=>r(1))},">>")]))}});const J=Z;var Y=J;const q=new(window.AudioContext||window.webkitAudioContext||!1);function X(e){return new Promise((t=>{const n=new FileReader;n.onload=function(){const e=n.result;t(e)},n.readAsArrayBuffer(e)}))}async function z(e){const t=await X(e),n=await q.decodeAudioData(t);return n}n(7658);function G(e){const t=(0,o.iH)([]);function n(){t.value.length=0}function a(n){const a=e.getCurrentTime.call(null);t.value.push({timestamp:Date.now(),lane:n,keydownTime:a,keyupTime:null})}function l(n){const a=e.getCurrentTime.call(null),l=Date.now();for(let e=t.value.length-1;e>=0;e--){const o=t.value[e];if(o.timestamp>=l)break;if(o.lane.name===n.name){if(null===o.keyupTime)return o.keyupTime=a,!0;break}}return!1}function r(){for(const e of t.value)null===e.keyupTime&&(e.keyupTime=e.keydownTime)}return{keyLog:t,clearKeyLog:n,addKeyDown:a,addKeyUp:l,closeAllKeylog:r}}function Q(e){const t=(0,o.iH)([]);function n(){if(0!==t.value.length){for(let n=0;n<t.value.length;n++)if(t.value[n]>e.currentTime.value-1)return void(e.currentTime.value=0===n?0:t.value[n-1]);e.currentTime.value=t.value[t.value.length-1]}else e.currentTime.value=0}function a(){if(0!==t.value.length){for(let n=t.value.length-1;n>=0;n--)if(t.value[n]<e.currentTime.value)return void(n===t.value.length-1?e.currentTime.value=e.getAudioDuration.call(null):e.currentTime.value=t.value[n+1]);e.currentTime.value=t.value[0]}else e.currentTime.value=e.getAudioDuration.call(null)}function l(){if(0===t.value.length)return void t.value.push(e.currentTime.value);const n=e.currentTime.value-1.5,a=e.currentTime.value+1.5,l=t.value.findIndex((e=>e<=a&&e>=n));-1===l?(t.value.push(e.currentTime.value),t.value.sort(((e,t)=>e-t))):t.value.splice(l,1)}function r(){t.value.length=0}return{bookmarkList:t,gotoPrevBookmark:n,gotoNextBookmark:a,toggleBookmark:l,clearBookmarks:r}}function ee(){return{djmax_4b:{a_0:"Lane1",s_0:"Lane2",";_0":"Lane3","'_0":"Lane4",shift_1:"SideL",shift_2:"SideR"},djmax_5b:{a_0:"Lane1",s_0:"Lane2",d_0:"Lane3",l_0:"Lane3",";_0":"Lane4","'_0":"Lane5",shift_1:"SideL",shift_2:"SideR"},djmax_6b:{a_0:"Lane1",s_0:"Lane2",d_0:"Lane3",l_0:"Lane4",";_0":"Lane5","'_0":"Lane6",shift_1:"SideL",shift_2:"SideR"},djmax_8b:{a_0:"Lane1",s_0:"Lane2",d_0:"Lane3",l_0:"Lane4",";_0":"Lane5","'_0":"Lane6",c_0:"TriggerL",",_0":"TriggerR",shift_1:"SideL",shift_2:"SideR"}}}const te=new d("kKeyMap",ee);function ne(e){const{keyDown:t,keyUp:n}=e;(0,l.bv)((()=>{document.addEventListener("keydown",o),document.addEventListener("keyup",r)})),(0,l.Jd)((()=>{document.removeEventListener("keydown",o),document.removeEventListener("keyup",r)}));const a={};function o(e){const n=`${e.key}_${e.location}`;let l=a[n];void 0===l&&(l=t&&t(n.toLowerCase(),e)||!1),a[n]=l,l&&(e.stopPropagation(),e.preventDefault())}function r(e){const t=`${e.key}_${e.location}`;if(void 0!==a[t]&&(delete a[t],n)){const a=n(t.toLowerCase(),e);a&&(e.stopPropagation(),e.preventDefault())}}}const ae={class:"main-container"},le={key:0,class:"controller"},oe=(0,l._)("span",{class:"spacer"},null,-1),re=(0,l._)("span",{class:"spacer"},null,-1);var ie=(0,l.aZ)({__name:"TrainerView",props:{file:null,videoProps:null,suppressInput:{type:Boolean}},setup(e){const t=e,n=(0,o.iH)(null),a=(0,l.Fl)((()=>URL.createObjectURL(t.file))),{keyLog:r,addKeyDown:i,addKeyUp:u,clearKeyLog:s,closeAllKeylog:c}=G({getCurrentTime(){return n.value?.getCurrentVideoTime()||0}}),d=(0,o.iH)(0),v=(0,o.iH)(1),{bookmarkList:f,gotoPrevBookmark:m,gotoNextBookmark:p,toggleBookmark:g,clearBookmarks:h}=Q({currentTime:d,getAudioDuration(){return _.value?.duration||0}});ne({keyDown(e){return e.startsWith("f1_")?(m(),!0):e.startsWith("f2_")?(g(),!0):e.startsWith("f3_")?(p(),!0):e.startsWith("arrowleft_")?(d.value-=2,!0):e.startsWith("arrowright_")?(d.value+=2,!0):e.startsWith("arrowup_")?(v.value+=.05,!0):!!e.startsWith("arrowdown_")&&(v.value-=.05,!0)}}),ne({keyDown(e){if(t.suppressInput)return!1;if(e.startsWith("delete_"))return s(),!0;const n=te.get()[t.videoProps.gameEnvName],a=n[e],l=x(t.videoProps),o=a?l.lanes.find((e=>e.name===a)):void 0;return void 0!==o&&(i(o),!0)},keyUp(e){if(t.suppressInput)return!1;const n=te.get()[t.videoProps.gameEnvName],a=n[e],l=x(t.videoProps),o=a?l.lanes.find((e=>e.name===a)):void 0;return void 0!==o&&(u(o),!0)}});const _=(0,o.iH)(null);function y(e){_.value&&(d.value=e*_.value.duration,c())}return(0,l.YP)((()=>t.file),(async()=>{_.value=await z(t.file),s(),h()}),{immediate:!0}),(t,i)=>((0,l.wg)(),(0,l.iD)("div",ae,[(0,l.Wm)(H,{ref_key:"videoPlayer",ref:n,class:"video-player",src:(0,o.SU)(a),videoProps:e.videoProps,keyLog:(0,o.SU)(r),currentTime:d.value,"onUpdate:currentTime":i[0]||(i[0]=e=>d.value=e),playbackRate:v.value},null,8,["src","videoProps","keyLog","currentTime","playbackRate"]),(0,o.SU)(_)?((0,l.wg)(),(0,l.iD)("div",le,[(0,l._)("button",{onClick:i[1]||(i[1]=(...e)=>(0,o.SU)(s)&&(0,o.SU)(s)(...e)),title:"Delete"},"Clear"),oe,(0,l._)("span",null,[(0,l.Uk)(" 배속  "),(0,l.Wm)(Y,{modelValue:v.value,"onUpdate:modelValue":i[2]||(i[2]=e=>v.value=e),step:.05,"decimal-precision":2},null,8,["modelValue","step"])]),re,(0,l._)("button",{onClick:i[3]||(i[3]=(...e)=>(0,o.SU)(m)&&(0,o.SU)(m)(...e)),title:"F1"},"이전 북마크로"),(0,l._)("button",{onClick:i[4]||(i[4]=(...e)=>(0,o.SU)(g)&&(0,o.SU)(g)(...e)),title:"F2"},"위치 저장/취소"),(0,l._)("button",{onClick:i[5]||(i[5]=(...e)=>(0,o.SU)(p)&&(0,o.SU)(p)(...e)),title:"F3"},"다음 북마크로")])):(0,l.kq)("",!0),(0,o.SU)(_)?((0,l.wg)(),(0,l.j4)(I,{key:1,class:"music-scroll",title:e.file.name,"audio-buffer":(0,o.SU)(_),playPercent:d.value/(0,o.SU)(_).duration,"mark-list":(0,o.SU)(f).map((e=>e/(0,o.SU)(_).duration)),"onUpdate:playPercent":y},null,8,["title","audio-buffer","playPercent","mark-list"])):(0,l.kq)("",!0)]))}});const ue=ie;var se=ue;function ce(e){switch(e){case"djmax_4b":case"djmax_5b":case"djmax_6b":case"djmax_8b":return e;default:return null}}function de(e){const t=ce(e);if(!t)throw new Error(`Invalid env name ${t}`);return{noteSpeedMultiplier:5.4,gearPos:"center",gameEnvName:t,audioSync:0}}function ve(e){const t=localStorage.getItem("videoProps_"+e);if(t){const e=JSON.parse(t);try{return{props:(0,s.Z)(de(e.gameEnvName),e)}}catch(l){console.error("Error loading previous videoprops, resetting...",l)}}const n=Number(prompt("Key Count")||"6"),a=`djmax_${n}b`;return{props:de(a),isNew:!0}}const fe={key:0},me=(0,l._)("h1",null,"키 입력 세팅",-1),pe=["disabled"],ge={key:1};var he=(0,l.aZ)({__name:"KeyConfigEditor",props:{videoProps:null},setup(e){const t=e,n=(0,l.Fl)((()=>x(t.videoProps)));(0,l.YP)((()=>t.videoProps),(()=>{a.value=0}));const a=(0,o.iH)(0),i=(0,o.iH)(!1),u=(0,o.iH)([]);function s(){a.value=0,u.value.length=0,i.value=!0}function c(){confirm("키 설정을 전부 초기화하시겠습니까?")&&te.clear()}function d(){i.value=!1}function v(){if(!n.value)return;const e=n.value.lanes;if(a.value!==e.length)return void alert("not all keys filled");const l={};for(let t=0;t<e.length;t++)l[u.value[t]]=e[t].name;te.get()[t.videoProps.gameEnvName]=l,i.value=!1}return ne({keyDown(e){return!!i.value&&(!!n.value&&(!(a.value>=n.value.lanes.length)&&(u.value[a.value++]=e,!0)))}}),(e,t)=>i.value&&(0,o.SU)(n)?((0,l.wg)(),(0,l.iD)("div",fe,[me,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(n).lanes.length,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t},(0,r.zw)((0,o.SU)(n).lanes[t].name)+": "+(0,r.zw)(u.value[t]||"(unassigned)"),1)))),128))]),(0,l._)("button",{onClick:d},"Cancel"),(0,l._)("button",{onClick:v,disabled:a.value<(0,o.SU)(n).lanes.length},"OK",8,pe)])):((0,l.wg)(),(0,l.iD)("div",ge,[(0,l._)("button",{onClick:s},"키 입력 설정"),(0,l._)("button",{onClick:c},"키 입력 전체 재설정")]))}});const _e=he;var ye=_e;const ke={class:"app-container"},be=(0,l._)("i",{class:"fa-solid fa-gear"},null,-1),we=[be],Se=(0,l._)("i",{class:"fa-solid fa-file-import"},null,-1),Te={class:"sidebar-left"},Pe={key:0,class:"videoprops"},Le=(0,l._)("tr",null,[(0,l._)("th",{colspan:"2"},"영상 설정")],-1),Ue=(0,l._)("td",null,"게임 종류",-1),xe=(0,l._)("option",{value:"djmax_4b"},"DJMAX 4b",-1),Ce=(0,l._)("option",{value:"djmax_5b"},"DJMAX 5b",-1),De=(0,l._)("option",{value:"djmax_6b"},"DJMAX 6b",-1),je=(0,l._)("option",{value:"djmax_8b"},"DJMAX 8b",-1),Ve=[xe,Ce,De,je],Ae=(0,l._)("td",null,"배속",-1),Re=(0,l._)("td",null,"기어 위치",-1),We=(0,l._)("td",null,"비디오-오디오 싱크",-1),He=(0,l._)("hr",null,null,-1),Ne=(0,l._)("tr",null,[(0,l._)("th",{colspan:"2"},"프로그램 설정")],-1),Oe=(0,l._)("td",null,"오디오/키보드 지연시간",-1),Ee={colspan:"2"},Ke={key:0},Fe=(0,l._)("hr",null,null,-1),Me={class:"main"},Ie=(0,l._)("i",{class:"fa-solid fa-file-import",title:"동영상 불러오기"},null,-1),Be=[Ie];var $e=(0,l.aZ)({__name:"App",setup(e){const{Compact:t}=n(9258),i=(0,o.iH)(null),u=(0,o.iH)(null),s=(0,o.iH)(null),c=(0,o.iH)(!1),d=(0,o.iH)(!1),m=g.get();function p(){c.value=!c.value}function h(){s.value?.click()}async function _(e){const t=e.currentTarget,n=t.files;if(n){const e=document.createElement("video");e.preload="metadata",e.src=URL.createObjectURL(n[0]),e.addEventListener("loadedmetadata",(()=>{u.value=n[0];const{props:e,isNew:t}=ve(u.value.name);i.value=e,t&&(c.value=!0)}))}}function y(){if(u.value){localStorage.removeItem("videoProps_"+u.value.name);const e=document.createElement("video");e.preload="metadata",e.src=URL.createObjectURL(u.value),e.addEventListener("loadedmetadata",(()=>{const{props:e,isNew:t}=ve(u.value.name);i.value=e,t&&(c.value=!0)}))}else alert("Load file first!")}return(0,l.YP)(i,(()=>{u.value&&i.value&&localStorage.setItem("videoProps_"+u.value.name,JSON.stringify(i.value))}),{deep:!0}),(e,n)=>((0,l.wg)(),(0,l.iD)("div",ke,[(0,l._)("div",{class:"app-button button-config",onClick:p,title:"플레이어 설정"},we),(0,l._)("div",{class:"app-button button-loadfile",onClick:h,title:"비디오 파일 선택"},[Se,(0,l._)("input",{ref_key:"fileInput",ref:s,type:"file",name:"select",onChange:_},null,544)]),(0,l.wy)((0,l._)("aside",Te,[i.value?((0,l.wg)(),(0,l.iD)("table",Pe,[Le,(0,l._)("tr",null,[Ue,(0,l._)("td",null,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>i.value.gameEnvName=e)},Ve,512),[[a.bM,i.value.gameEnvName]])])]),(0,l._)("tr",null,[Ae,(0,l._)("td",null,[(0,l.Wm)(Y,{modelValue:i.value.noteSpeedMultiplier,"onUpdate:modelValue":n[1]||(n[1]=e=>i.value.noteSpeedMultiplier=e),step:.1},null,8,["modelValue","step"])])]),(0,l._)("tr",null,[Re,(0,l._)("td",null,[(0,l._)("button",{onClick:n[2]||(n[2]=e=>i.value.gearPos="left")},"왼쪽"),(0,l.Uk)("  "),(0,l._)("button",{onClick:n[3]||(n[3]=e=>i.value.gearPos="center")},"중앙"),(0,l.Uk)("  "),(0,l._)("button",{onClick:n[4]||(n[4]=e=>i.value.gearPos="right")},"오른쪽")])]),(0,l._)("tr",null,[We,(0,l._)("td",null,[(0,l.Wm)(Y,{modelValue:i.value.audioSync,"onUpdate:modelValue":n[5]||(n[5]=e=>i.value.audioSync=e),step:.01,"decimal-precision":2},null,8,["modelValue","step"])])]),(0,l._)("tr",null,[(0,l._)("td",{colspan:"2",class:"text-right"},[(0,l._)("button",{onClick:y},"영상 설정 초기화")])])])):(0,l.kq)("",!0),He,(0,l._)("table",null,[Ne,(0,l._)("tr",null,[Oe,(0,l._)("td",null,[(0,l.Wm)(Y,{modelValue:(0,o.SU)(v).get(),"onUpdate:modelValue":n[6]||(n[6]=e=>(0,o.SU)(v).set(e)),step:.01,"decimal-precision":2},null,8,["modelValue","step"])])]),(0,l._)("tr",null,[(0,l._)("td",Ee,[(0,l._)("span",{onClick:n[7]||(n[7]=e=>d.value=!d.value)},"노트 색상 설정 "+(0,r.zw)(d.value?"▲":"▼"),1),d.value?((0,l.wg)(),(0,l.iD)("ul",Ke,[(0,l._)("li",null,[(0,l.Uk)("숫자 노트 색상: "),(0,l.Wm)((0,o.SU)(t),{modelValue:(0,o.SU)(m)[(0,o.SU)(f).Number],"onUpdate:modelValue":n[8]||(n[8]=e=>(0,o.SU)(m)[(0,o.SU)(f).Number]=e.rgba),disableAlpha:!0},null,8,["modelValue"])]),(0,l._)("li",null,[(0,l.Uk)("사이드 노트 색상: "),(0,l.Wm)((0,o.SU)(t),{modelValue:(0,o.SU)(m)[(0,o.SU)(f).Side],"onUpdate:modelValue":n[9]||(n[9]=e=>(0,o.SU)(m)[(0,o.SU)(f).Side]=e.rgba),disableAlpha:!0},null,8,["modelValue"])]),(0,l._)("li",null,[(0,l.Uk)("트리거 노트 색상: "),(0,l.Wm)((0,o.SU)(t),{modelValue:(0,o.SU)(m)[(0,o.SU)(f).Trigger],"onUpdate:modelValue":n[10]||(n[10]=e=>(0,o.SU)(m)[(0,o.SU)(f).Trigger]=e.rgba),disableAlpha:!0},null,8,["modelValue"])])])):(0,l.kq)("",!0)])])]),Fe,i.value?((0,l.wg)(),(0,l.j4)(ye,{key:1,"video-props":i.value},null,8,["video-props"])):(0,l.kq)("",!0)],512),[[a.F8,c.value]]),(0,l._)("div",Me,[(0,o.SU)(u)&&i.value?((0,l.wg)(),(0,l.j4)(se,{key:0,file:(0,o.SU)(u),videoProps:i.value},null,8,["file","videoProps"])):((0,l.wg)(),(0,l.iD)("div",{key:1,class:"main-load-file",onClick:h},Be))])]))}});const Ze=$e;var Je=Ze;(0,a.ri)(Je).mount("#app")}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,o){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],o=e[c][2];for(var i=!0,u=0;u<a.length;u++)(!1&o||r>=o)&&Object.keys(n.O).every((function(e){return n.O[e](a[u])}))?a.splice(u--,1):(i=!1,o<r&&(r=o));if(i){e.splice(c--,1);var s=l();void 0!==s&&(t=s)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,l,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,o,r=a[0],i=a[1],u=a[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(u)var c=u(n)}for(t&&t(a);s<r.length;s++)o=r[s],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},a=self["webpackChunkrhythmvideotrainer"]=self["webpackChunkrhythmvideotrainer"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(478)}));a=n.O(a)})();
//# sourceMappingURL=app.8b3538b8.js.map