{"version":3,"file":"js/app.4cc578bf.js","mappings":"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","sources":["webpack://djmax-trainer/./src/KeyLog.ts","webpack://djmax-trainer/./src/utils/resizeWatcher.ts","webpack://djmax-trainer/./src/pref/prefIO.ts","webpack://djmax-trainer/./src/pref/ColorPref.ts","webpack://djmax-trainer/./src/trainerView/noteOverlay.ts","webpack://djmax-trainer/./src/utils/requestVideoFrameCallback.ts","webpack://djmax-trainer/./src/trainerView/VideoPlayer.vue?97fe","webpack://djmax-trainer/./src/trainerView/VideoPlayer.vue","webpack://djmax-trainer/./src/components/AudioScrollbar.vue?ca6f","webpack://djmax-trainer/./src/components/AudioScrollbar.vue","webpack://djmax-trainer/./src/components/NumberSpinner.vue?dc87","webpack://djmax-trainer/./src/components/NumberSpinner.vue","webpack://djmax-trainer/./src/utils/extractAudio.ts","webpack://djmax-trainer/./src/pref/KeyConfig.ts","webpack://djmax-trainer/./src/utils/onKeyDown.ts","webpack://djmax-trainer/./src/trainerView/TrainerView.vue?7140","webpack://djmax-trainer/./src/trainerView/TrainerView.vue","webpack://djmax-trainer/./src/pref/VideoProps.ts","webpack://djmax-trainer/./src/components/KeyConfigEditor.vue?759b","webpack://djmax-trainer/./src/components/KeyConfigEditor.vue","webpack://djmax-trainer/./src/App.vue?2a5e","webpack://djmax-trainer/./src/App.vue","webpack://djmax-trainer/./src/main.ts","webpack://djmax-trainer/webpack/bootstrap","webpack://djmax-trainer/webpack/runtime/chunk loaded","webpack://djmax-trainer/webpack/runtime/compat get default export","webpack://djmax-trainer/webpack/runtime/define property getters","webpack://djmax-trainer/webpack/runtime/global","webpack://djmax-trainer/webpack/runtime/hasOwnProperty shorthand","webpack://djmax-trainer/webpack/runtime/jsonp chunk loading","webpack://djmax-trainer/webpack/startup"],"sourcesContent":["/* eslint-disable no-unused-vars */\nexport enum Lane {\n  Lane1,\n  Lane2,\n  Lane3,\n  Lane4,\n  Lane5,\n  Lane6,\n  TriggerL,\n  TriggerR,\n  SideL,\n  SideR\n}\n\nexport interface KeyLogEntry {\n  lane: Lane\n  keydownTime: number\n  keyupTime: number | null\n}\n\nexport type KeyLog = KeyLogEntry[]\n","import { onBeforeUnmount, onMounted, Ref, ref } from 'vue'\n\nexport function registerResizeWatcher (elementRef: Ref, handler: () => void) {\n  const ro = ref(null) as Ref<ResizeObserver | null>\n\n  onMounted(() => {\n    const ob = new ResizeObserver(onResize)\n    ob.observe(elementRef.value!)\n    ro.value = ob\n\n    handler()\n  })\n\n  onBeforeUnmount(() => {\n    ro.value?.unobserve(elementRef.value!)\n  })\n\n  function onResize () {\n    handler()\n  }\n}\n","import { merge } from 'lodash-es'\nimport { Ref, ref, watch } from 'vue'\n\nconst ioKeySet = new Set<string>()\n\nexport class PrefIO <T> {\n  prefKey: string\n  pref: Ref<T>\n  defaultConstructor: () => T\n\n  constructor (\n    prefKey: string,\n    defaultConstructor: () => T\n  ) {\n    this.prefKey = prefKey\n    this.defaultConstructor = defaultConstructor\n    this.pref = ref(this._load()) as Ref<T>\n    watch(this.pref, (v) => {\n      localStorage.setItem(this.prefKey, JSON.stringify(v))\n    }, { deep: true })\n\n    if (ioKeySet.has(prefKey)) {\n      throw new Error('Duplicate prefKey')\n    }\n    ioKeySet.add(prefKey)\n  }\n\n  _load (): T {\n    const pref = localStorage.getItem(this.prefKey)\n    const defaultValue = this.defaultConstructor.call(null)\n    if (pref) {\n      return merge(defaultValue, JSON.parse(pref))\n    } else return defaultValue\n  }\n\n  get (): T {\n    return this.pref.value\n  }\n\n  clear () {\n    this.pref.value = this.defaultConstructor.call(null)\n    localStorage.removeItem(this.prefKey)\n  }\n\n  set (newPref: T) {\n    console.log(this.prefKey, newPref)\n    this.pref.value = newPref\n    localStorage.setItem(this.prefKey, JSON.stringify(this.pref.value))\n  }\n}\n","import { PrefIO } from './prefIO'\n\nexport enum ColorKey {\n  Number,\n  Trigger,\n  Side\n}\n\nexport type ColorPref = { [key in ColorKey]: string }\n\nexport function defaultColorPref (): ColorPref {\n  return {\n    [ColorKey.Number]: 'rgb(255, 255, 255)',\n    [ColorKey.Trigger]: 'rgb(255, 0, 200)',\n    [ColorKey.Side]: 'rgb(120, 255, 0)'\n  }\n}\n\nexport const colorPrefIO = new PrefIO('kColorPref', defaultColorPref)\n","import { VideoProps } from '@/pref/VideoProps'\nimport { KeyLog, Lane } from '@/KeyLog'\nimport { ColorKey, colorPrefIO } from '@/pref/ColorPref'\nimport tinycolor from 'tinycolor2'\nimport { toRaw } from 'vue'\n\nexport function updateNoteOverlayCanvas (\n  videoElement: HTMLVideoElement,\n  targetCanvas: HTMLCanvasElement,\n  videoProps_: VideoProps,\n  keyLog_: KeyLog\n) {\n  const videoProps = toRaw(videoProps_)\n  const keyLog = toRaw(keyLog_)\n\n  const ctx = targetCanvas.getContext('2d')!\n  const { width, height } = targetCanvas\n  const currentTime = videoElement.currentTime + videoProps.audioSync\n  const { judgementLinePos, noteSize } = videoProps\n  const yPerSecond = 0.25648 * videoProps.noteSpeedMultiplier\n  const perfectRange = 0.042\n  const perfectY = perfectRange * yPerSecond\n\n  ctx.clearRect(0, 0, width, height)\n\n  const noteRegionWidth = videoProps.noteSize.w * 6\n\n  // Enter scaled world\n  const oldTransform = ctx.getTransform()\n  ctx.setTransform(1, 0, 0, 1, 0, 0)\n  ctx.scale(width, height)\n\n  // darken non-note-regions.\n  ctx.fillStyle = '#000000e0'\n  ctx.rect(0, 0, judgementLinePos.x, 1)\n  ctx.rect(judgementLinePos.x + noteRegionWidth, 0, 1, 1)\n  ctx.fill()\n\n  // Draw note region boundary\n  ctx.strokeStyle = 'blue'\n  ctx.lineWidth = 0.001\n  ctx.beginPath()\n\n  ctx.moveTo(judgementLinePos.x, 0)\n  ctx.lineTo(judgementLinePos.x, 1)\n\n  ctx.moveTo(judgementLinePos.x + noteRegionWidth, 0)\n  ctx.lineTo(judgementLinePos.x + noteRegionWidth, 1)\n\n  ctx.moveTo(judgementLinePos.x, judgementLinePos.y)\n  ctx.lineTo(judgementLinePos.x + noteRegionWidth, judgementLinePos.y)\n\n  ctx.stroke()\n\n  const colorPref = colorPrefIO.get()\n\n  // render notes\n  for (const keyEntry of keyLog) {\n    // Assumes 6b\n    // const rectH = noteSize.h\n    let rectW: number\n    let sideNoteW: number\n    switch (videoProps.keyCount) {\n      case 4: sideNoteW = noteSize.w * 2; break\n      case 5: sideNoteW = noteSize.w * 2.5; break\n      case 6: case 8: sideNoteW = noteSize.w * 3; break\n      default: throw new Error('Invalid keyCount')\n    }\n\n    // Calculate Y coord of start/end\n    const keydownY = judgementLinePos.y - noteSize.h / 2 - yPerSecond * (keyEntry.keydownTime - currentTime)\n    const keyupY = (\n      keyEntry.keyupTime !== null\n        ? judgementLinePos.y - noteSize.h / 2 - yPerSecond * (keyEntry.keyupTime - currentTime)\n        : judgementLinePos.y)\n\n    // Don't render invisible notes\n    if (keydownY < -noteSize.h || keyupY > 1 + noteSize.h) continue\n\n    // Width\n    if (\n      keyEntry.lane === Lane.SideL ||\n      keyEntry.lane === Lane.SideR ||\n      keyEntry.lane === Lane.TriggerL ||\n      keyEntry.lane === Lane.TriggerR\n    ) {\n      rectW = sideNoteW\n    } else {\n      rectW = noteSize.w\n    }\n\n    // Color\n    let rectX = judgementLinePos.x\n    let noteColorString: string\n    switch (keyEntry.lane) {\n      case Lane.Lane1:\n      case Lane.Lane2:\n      case Lane.Lane3:\n      case Lane.Lane4:\n      case Lane.Lane5:\n      case Lane.Lane6:\n        rectX += noteSize.w * (keyEntry.lane - Lane.Lane1)\n        noteColorString = colorPref[ColorKey.Number]\n        break\n\n      case Lane.SideR:\n        rectX += sideNoteW\n\n        // eslint-disable-next-line no-fallthrough\n      case Lane.SideL:\n        noteColorString = colorPref[ColorKey.Side]\n        break\n\n      case Lane.TriggerR:\n        rectX += sideNoteW\n\n      // eslint-disable-next-line no-fallthrough\n      case Lane.TriggerL:\n        noteColorString = colorPref[ColorKey.Trigger]\n        break\n    }\n    const noteColorRGB = tinycolor(noteColorString).toRgb()\n\n    // Render\n    ctx.fillStyle = `rgb(${noteColorRGB.r}, ${noteColorRGB.g}, ${noteColorRGB.b}, 0.8)`\n    ctx.beginPath()\n    ctx.moveTo(rectX + rectW / 2, keydownY - perfectY / 2)\n    ctx.lineTo(rectX, keydownY)\n    ctx.lineTo(rectX + rectW / 2, keydownY + perfectY / 2)\n    ctx.lineTo(rectX + rectW, keydownY)\n    ctx.closePath()\n    ctx.fill()\n\n    // Render keyup\n    const trailW = rectW * 0.12\n    ctx.fillStyle = `rgb(${noteColorRGB.r}, ${noteColorRGB.g}, ${noteColorRGB.b}, 0.2)`\n    ctx.beginPath()\n    ctx.rect(rectX + rectW / 2 - trailW / 2, keyupY, trailW, (keydownY - keyupY))\n    ctx.fill()\n\n    // Render perfect range\n    // ctx.beginPath()\n    // ctx.strokeStyle = '#ffffffc0'\n    // ctx.lineWidth = 0.004\n    // ctx.moveTo(rectX + rectW / 2, keydownY - perfectY + rectH / 2)\n    // ctx.lineTo(rectX + rectW / 2, keydownY + perfectY + rectH / 2)\n    // ctx.stroke()\n  }\n  // revert old transform\n  ctx.setTransform(oldTransform)\n}\n","export function crossPlatformRequestVideoFrameCallback (videoEl: HTMLVideoElement, cb: () => void) {\n  if ((videoEl as any).requestVideoFrameCallback) {\n    return (videoEl as any).requestVideoFrameCallback(cb)\n  } else {\n    return requestAnimationFrame(cb)\n  }\n}\n\nexport function crossPlatformCancelVideoFrameCallback (videoEl: HTMLVideoElement, reqId: number) {\n  if ((videoEl as any).cancelVideoFrameCallback) {\n    return (videoEl as any).cancelVideoFrameCallback(reqId)\n  } else {\n    return cancelAnimationFrame(reqId)\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = [\"src\"]\n\nimport { onMounted, onUnmounted, Ref, ref, watch, onBeforeUnmount } from 'vue'\nimport { registerResizeWatcher } from '@/utils/resizeWatcher'\nimport { updateNoteOverlayCanvas } from './noteOverlay'\nimport { VideoProps } from '@/pref/VideoProps'\nimport { KeyLog } from '@/KeyLog'\nimport { crossPlatformCancelVideoFrameCallback, crossPlatformRequestVideoFrameCallback } from '@/utils/requestVideoFrameCallback'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'VideoPlayer',\n  props: {\n    src: null,\n    currentTime: null,\n    playbackRate: null,\n    videoProps: null,\n    keyLog: null\n  },\n  emits: [\"update:currentTime\"],\n  setup(__props: any, { expose, emit }: { emit: ({(eventName: 'update:currentTime', currentTime: number): void}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\n  src: string\n  currentTime: number\n  playbackRate: number\n  videoProps: VideoProps\n  keyLog: KeyLog\n};\n\n\n\n\n\nconst root = ref(null) as Ref<null | HTMLDivElement>\nconst video = ref(null) as Ref<null | HTMLVideoElement>\nconst overlayCanvas = ref(null) as Ref<any>\n\nfunction resizeCanvas () {\n  if (!video.value) return\n  if (video.value.readyState < 1) return // Should at least be HAVE_METADATA state\n\n  const canvas = overlayCanvas.value\n  if (!canvas) return\n\n  // Resize coordinate system of canvas\n  const { videoWidth, videoHeight } = video.value\n\n  // Resize canvas to comply with letterbox of <video> element.\n  const rect = root.value!.getClientRects()[0]\n  const properZoom = Math.min(rect.width / videoWidth, rect.height / videoHeight)\n  const properWidth = videoWidth * properZoom + 'px'\n  const properHeight = videoHeight * properZoom + 'px'\n\n  if (\n    canvas.watch !== videoWidth ||\n    canvas.height !== videoHeight ||\n    canvas.style.width !== properWidth ||\n    canvas.style.height !== properHeight\n  ) {\n    canvas.width = videoWidth\n    canvas.height = videoHeight\n    canvas.style.width = properWidth\n    canvas.style.height = properHeight\n  }\n}\n\nregisterResizeWatcher(root, resizeCanvas)\n\n// render overlay canvas\nconst vrcb = ref(null) as Ref<null | number>\nonMounted(() => {\n  vrcb.value = crossPlatformRequestVideoFrameCallback(video.value!, onVideoFrame)\n})\n\nonBeforeUnmount(() => {\n  if (vrcb.value) {\n    crossPlatformCancelVideoFrameCallback(video.value!, vrcb.value)\n  }\n})\n\nfunction onVideoFrame () {\n  vrcb.value = crossPlatformRequestVideoFrameCallback(video.value!, onVideoFrame)\n  resizeCanvas()\n  if (video.value && overlayCanvas.value) {\n    updateNoteOverlayCanvas(\n      video.value,\n      overlayCanvas.value,\n      props.videoProps,\n      props.keyLog\n    )\n  }\n}\n\n// Pause video on change\nwatch(() => props.src, () => {\n  video.value?.pause()\n}, { immediate: true })\n\n/// ////\n\nconst playbackStartTime = ref(Date.now() / 1000)\n\nwatch(() => props.currentTime, (newValue: number) => {\n  if (video.value) {\n    const newPlaybackStartTime = Date.now() / 1000 - (newValue / props.playbackRate)\n\n    // Prevent feedback loop with emit('update:currentTime')\n    if (Math.abs(newPlaybackStartTime - playbackStartTime.value) < 0.05) return\n\n    playbackStartTime.value = newPlaybackStartTime\n    video.value.currentTime = props.currentTime\n    video.value.playbackRate = props.playbackRate\n    video.value.play()\n  }\n})\n\nwatch(() => props.playbackRate, (v: number) => {\n  if (video.value) {\n    video.value.playbackRate = v\n    adjustPlayStartTime()\n  }\n})\n\nconst reqId = ref(0)\n\nfunction updateCurrentTime () {\n  if (video.value) {\n    if (video.value.paused) {\n      emit('update:currentTime', video.value.currentTime)\n    } else {\n      emit('update:currentTime', ((Date.now() / 1000) - playbackStartTime.value) * props.playbackRate)\n    }\n  }\n  reqId.value = requestAnimationFrame(updateCurrentTime)\n}\n\nfunction adjustPlayStartTime () {\n  if (video.value) {\n    playbackStartTime.value = Date.now() / 1000 - (video.value.currentTime / props.playbackRate)\n  }\n}\n\n// Exported to TrainerView.vue\n// eslint-disable-next-line no-unused-vars\nexpose({\n  getCurrentVideoTime (): number {\n    return video.value!.currentTime\n  }\n})\n\n/// ////////////\n\nonMounted(() => {\n  video.value!.src = props.src\n  reqId.value = requestAnimationFrame(updateCurrentTime)\n})\n\nonUnmounted(() => {\n  cancelAnimationFrame(reqId.value)\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    ref_key: \"root\",\n    ref: root,\n    class: \"video-container\"\n  }, [\n    _createElementVNode(\"video\", {\n      ref_key: \"video\",\n      ref: video,\n      src: __props.src,\n      onTimeupdate: adjustPlayStartTime,\n      onLoadedmetadata: resizeCanvas\n    }, null, 40, _hoisted_1),\n    _createElementVNode(\"canvas\", {\n      ref_key: \"overlayCanvas\",\n      ref: overlayCanvas\n    }, null, 512)\n  ], 512))\n}\n}\n\n})","import script from \"./VideoPlayer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./VideoPlayer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./VideoPlayer.vue?vue&type=style&index=0&id=39adabca&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"canvas-container\" }\n\nimport { ref, toRefs, watch, onMounted, computed } from 'vue'\nimport quickselect from 'quickselect'\nimport { registerResizeWatcher } from '@/utils/resizeWatcher'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'AudioScrollbar',\n  props: {\n    audioBuffer: null,\n    playPercent: null,\n    markList: null\n  },\n  emits: [\"update:playPercent\"],\n  setup(__props: any, { emit }: { emit: ({(eventName: 'update:playPercent', playPercent: number): void}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\n  audioBuffer: AudioBuffer,\n  playPercent: number,\n  markList: number[]\n};\n\n\n\n\nconst { audioBuffer, playPercent } = toRefs(props)\nconst waveformCanvas = ref<null | HTMLCanvasElement>(null)\nconst overlayCanvas = ref<null | HTMLCanvasElement>(null)\n\n// ----------------\n\n// Waveform rendering\n\nfunction renderCanvas () {\n  const channel0 = audioBuffer.value.getChannelData(0)\n  const { length } = channel0\n\n  const canvas = waveformCanvas.value!\n  const { scrollWidth: width, scrollHeight: height } = canvas\n  canvas.width = width\n  canvas.height = height\n  const ctx = waveformCanvas.value!.getContext('2d')!\n\n  const imageData = ctx.createImageData(width, height)\n  imageData.data.fill(0xff)\n\n  for (let x = 0; x < width; x++) {\n    const startIndex = x * length / width | 0\n    const endIndex = (x + 1) * length / width | 0\n    const intervalSamples = channel0.slice(startIndex, endIndex)\n\n    let maxSample = -1\n    let minSample = 1\n    for (const sample of intervalSamples) {\n      if (maxSample < sample) maxSample = sample\n      if (minSample > sample) minSample = sample\n    }\n    const intervalLength = intervalSamples.length\n    const q1Index = intervalLength * 1 / 4 | 0\n    quickselect(intervalSamples, q1Index)\n    const q1Sample = intervalSamples[q1Index]\n\n    const q3Index = intervalLength * 3 / 4 | 0\n    quickselect(intervalSamples, q3Index)\n    const q3Sample = intervalSamples[q3Index]\n\n    // maxSample = 1 → y = 0, minSample = -1 → y = height - 1\n    const maxSampleY = ((1 - (maxSample + 1) / 2.0) * (height - 1) + 0.5) | 0\n    const minSampleY = ((1 - (minSample + 1) / 2.0) * (height - 1) + 0.5) | 0\n    for (let iy = maxSampleY; iy <= minSampleY; iy++) {\n      const index = (iy * width + x) * 4\n      imageData.data[index + 0] = 160\n      imageData.data[index + 1] = 160\n      imageData.data[index + 2] = 160\n    }\n\n    const q3SampleY = ((1 - (q3Sample + 1) / 2.0) * (height - 1) + 0.5) | 0\n    const q1SampleY = ((1 - (q1Sample + 1) / 2.0) * (height - 1) + 0.5) | 0\n    for (let iy = q3SampleY; iy <= q1SampleY; iy++) {\n      const index = (iy * width + x) * 4\n      imageData.data[index + 0] = 96\n      imageData.data[index + 1] = 96\n      imageData.data[index + 2] = 96\n    }\n  }\n\n  ctx.putImageData(imageData, 0, 0)\n}\n\nonMounted(renderCanvas)\nwatch(audioBuffer, renderCanvas)\n\n// ----------------\n\nconst rerenderWatcher = computed(() => {\n  return [\n    playPercent.value,\n    props.markList\n  ]\n})\n\n// Cursor rendering part\nfunction renderOverlay () {\n  const canvas = overlayCanvas.value\n  if (canvas) {\n    const { scrollWidth: width, scrollHeight: height } = canvas\n    if (canvas.width !== width || canvas.height !== height) {\n      canvas.width = width\n      canvas.height = height\n    }\n    const ctx = overlayCanvas.value!.getContext('2d')!\n\n    const imageData = ctx.createImageData(width, height)\n    imageData.data.fill(0)\n\n    // Render cursor\n    function renderVerticalBar (xPercent: number, color: number[]) {\n      let x = (xPercent * width + 0.5) | 0\n      if (x < 0) x = 0\n      if (x >= width) x = width - 1\n\n      for (let iy = 0; iy < height; iy++) {\n        const index = (iy * width + x) * 4\n        imageData.data[index + 0] = color[0]\n        imageData.data[index + 1] = color[1]\n        imageData.data[index + 2] = color[2]\n        imageData.data[index + 3] = 255\n      }\n    }\n\n    // cursor\n    renderVerticalBar(playPercent.value, [80, 255, 80])\n\n    // marks\n    for (const mark of props.markList) {\n      renderVerticalBar(mark, [255, 100, 100])\n    }\n\n    // Render bookmarks\n    ctx.putImageData(imageData, 0, 0)\n  }\n}\n\nonMounted(renderOverlay)\nwatch(rerenderWatcher, renderOverlay)\n\nfunction onClick (event: MouseEvent) {\n  const canvas = overlayCanvas.value!\n  emit('update:playPercent', event.offsetX / canvas.scrollWidth)\n}\n\n// ----------------\n\n// Resize handler\n\nregisterResizeWatcher(waveformCanvas, onResize)\n\nfunction onResize () {\n  renderCanvas()\n  renderOverlay()\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"canvas\", {\n      ref_key: \"waveformCanvas\",\n      ref: waveformCanvas\n    }, null, 512),\n    _createElementVNode(\"canvas\", {\n      ref_key: \"overlayCanvas\",\n      ref: overlayCanvas,\n      onClick: onClick\n    }, null, 512)\n  ]))\n}\n}\n\n})","import script from \"./AudioScrollbar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AudioScrollbar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AudioScrollbar.vue?vue&type=style&index=0&id=a0ee7004&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"spinner-container\" }\nconst _hoisted_2 = [\"value\"]\n\nimport { nextTick, Ref, ref } from 'vue'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'NumberSpinner',\n  props: {\n    modelValue: null,\n    step: null,\n    decimalPrecision: null\n  },\n  emits: [\"update:modelValue\"],\n  setup(__props: any, { emit }: { emit: ({(eventName: 'update:modelValue', newValue: number): void}), expose: any, slots: any, attrs: any }) {\n\nconst props = __props as {\n  modelValue: number,\n  step?: number,\n  decimalPrecision?: number\n};\n\n\n\nconst field = ref(null) as Ref<null | HTMLInputElement>\n\n/// /\n\nfunction step (multiplier: number) {\n  updateValue(props.modelValue + (props.step || 1) * multiplier)\n}\n\nfunction onKeyDown (ev: KeyboardEvent) {\n  if (!field.value) return\n\n  if (ev.key.startsWith('Arrow')) {\n    ev.stopPropagation()\n\n    const selStart = Math.max(field.value.selectionStart || 1, 1)\n    const v = field.value.value\n    const periodPos = (props.decimalPrecision === 0) ? v.length : v.indexOf('.')\n\n    let step: number\n    if (selStart <= periodPos) {\n      // 12^3.4567 (selStart 2, periodPos 3)\n      // 45^6 (selStart 2, periodPos 3)\n      step = Math.pow(10, periodPos - selStart)\n    } else {\n      // 12.34^567 (selStart 5, periodPos 2)\n      step = Math.pow(10, periodPos - selStart + 1)\n    }\n    if (ev.key === 'ArrowUp') {\n      updateValue(props.modelValue + step)\n      ev.preventDefault()\n      nextTick(() => { field.value!.setSelectionRange(selStart, selStart) })\n    } else if (ev.key === 'ArrowDown') {\n      updateValue(props.modelValue - step)\n      ev.preventDefault()\n      nextTick(() => { field.value!.setSelectionRange(selStart, selStart) })\n    }\n  }\n}\n\nfunction updateValue (newValue: string | number) {\n  const step = props.step || 1\n  newValue = (Math.floor(Number(newValue) / step + 0.5) | 0) * step\n  emit('update:modelValue', newValue)\n}\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"button\", {\n      onClick: _cache[0] || (_cache[0] = ($event: any) => (step(-1)))\n    }, \"<<\"),\n    _createElementVNode(\"input\", {\n      ref_key: \"field\",\n      ref: field,\n      value: __props.modelValue.toFixed(__props.decimalPrecision || 1),\n      onKeydown: onKeyDown,\n      onChange: _cache[1] || (_cache[1] = e => updateValue((e.target as any).value))\n    }, null, 40, _hoisted_2),\n    _createElementVNode(\"button\", {\n      onClick: _cache[2] || (_cache[2] = ($event: any) => (step(1)))\n    }, \">>\")\n  ]))\n}\n}\n\n})","import script from \"./NumberSpinner.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NumberSpinner.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NumberSpinner.vue?vue&type=style&index=0&id=4a4a9e26&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","export const audioCtx = new (\n  window.AudioContext || // Default\n  (window as any).webkitAudioContext || // Safari and old versions of Chrome\n  false\n)()\n\nfunction readFileArrayBuffer (file: File): Promise<ArrayBuffer> {\n  return new Promise((resolve) => {\n    const reader = new FileReader()\n    reader.onload = function () {\n      const arrayBuffer = reader.result as ArrayBuffer\n      resolve(arrayBuffer)\n    }\n    reader.readAsArrayBuffer(file)\n  })\n}\n\nexport async function getAudioBufferFromFile (file: File): Promise<AudioBuffer> {\n  const arrayBuffer = await readFileArrayBuffer(file)\n  const decodedAudioData = await audioCtx.decodeAudioData(arrayBuffer)\n  return decodedAudioData\n}\n","import { Lane } from '../KeyLog'\nimport { PrefIO } from './prefIO'\n\nexport type KeyConfig = { [key: string]: Lane }\n\nfunction defaultKeyMap (): { [key: number]: KeyConfig} {\n  return {\n    4: {\n      a_0: Lane.Lane1,\n      s_0: Lane.Lane2,\n      ';_0': Lane.Lane3,\n      '\\'_0': Lane.Lane4,\n      shift_1: Lane.SideL,\n      shift_2: Lane.SideR\n    },\n\n    5: {\n      a_0: Lane.Lane1,\n      s_0: Lane.Lane2,\n      d_0: Lane.Lane3,\n      l_0: Lane.Lane3,\n      ';_0': Lane.Lane4,\n      '\\'_0': Lane.Lane5,\n      shift_1: Lane.SideL,\n      shift_2: Lane.SideR\n    },\n\n    6: {\n      a_0: Lane.Lane1,\n      s_0: Lane.Lane2,\n      d_0: Lane.Lane3,\n      l_0: Lane.Lane4,\n      ';_0': Lane.Lane5,\n      '\\'_0': Lane.Lane6,\n      shift_1: Lane.SideL,\n      shift_2: Lane.SideR\n    },\n\n    8: {\n      a_0: Lane.Lane1,\n      s_0: Lane.Lane2,\n      d_0: Lane.Lane3,\n      l_0: Lane.Lane4,\n      ';_0': Lane.Lane5,\n      '\\'_0': Lane.Lane6,\n      c_0: Lane.TriggerL,\n      ',_0': Lane.TriggerR,\n      shift_1: Lane.SideL,\n      shift_2: Lane.SideR\n    }\n  }\n}\n\nexport const keyMapPrefIO = new PrefIO('kKeyMap', defaultKeyMap)\n","import { onMounted, onBeforeUnmount } from 'vue'\n\nexport function onKeyDown (handler: (key: string, ev: KeyboardEvent) => boolean) {\n  onMounted(() => {\n    document.addEventListener('keydown', listener)\n  })\n\n  onBeforeUnmount(() => {\n    document.removeEventListener('keydown', listener)\n  })\n\n  const lastRetCache = {} as { [key: string]: boolean }\n\n  function listener (ev: KeyboardEvent) {\n    const keyString = `${ev.key}_${ev.location}`\n    const ret = (ev.repeat) ? (lastRetCache[keyString] || false) : handler(keyString.toLowerCase(), ev)\n    lastRetCache[keyString] = ret\n    if (ret) {\n      ev.stopPropagation()\n      ev.preventDefault()\n    }\n  }\n}\n\nexport function onKeyUp (handler: (key: string) => boolean) {\n  onMounted(() => {\n    document.addEventListener('keyup', listener)\n  })\n\n  onBeforeUnmount(() => {\n    document.removeEventListener('keyup', listener)\n  })\n\n  function listener (ev: KeyboardEvent) {\n    const keyString = `${ev.key}_${ev.location}`\n    const ret = handler(keyString.toLowerCase())\n    if (ret) {\n      ev.stopPropagation()\n      ev.preventDefault()\n    }\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"main-container\" }\nconst _hoisted_2 = { class: \"controller\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"spacer\" }, null, -1)\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"spacer\" }, null, -1)\n\nimport { ref, watch, Ref, computed } from 'vue'\nimport VideoPlayer from './VideoPlayer.vue'\nimport AudioScrollbar from '@/components/AudioScrollbar.vue'\nimport NumberSpinner from '@/components/NumberSpinner.vue'\nimport { getAudioBufferFromFile } from '@/utils/extractAudio'\nimport { KeyLog, Lane } from '@/KeyLog'\nimport { VideoProps } from '@/pref/VideoProps'\nimport { keyMapPrefIO } from '@/pref/KeyConfig'\nimport { onKeyDown, onKeyUp } from '@/utils/onKeyDown'\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'TrainerView',\n  props: {\n    file: null,\n    videoProps: null,\n    suppressInput: { type: Boolean }\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n  file: File\n  videoProps: VideoProps\n  suppressInput?: boolean\n};\n\n\n\nconst videoUrl = computed(() => URL.createObjectURL(props.file))\nconst currentTime = ref(0)\nconst playbackRate = ref(1)\nconst keyLog = ref([]) as Ref<KeyLog>\nconst videoPlayer = ref(null) as Ref<any>\n\nfunction clearKeyLog () {\n  keyLog.value.length = 0\n}\n\nfunction addKey (lane: Lane) {\n  const accurateCurrentTime = videoPlayer.value?.getCurrentVideoTime() || 0\n\n  keyLog.value.push({\n    lane,\n    keydownTime: accurateCurrentTime,\n    keyupTime: null\n  })\n}\n\nfunction addKeyUp (lane: Lane) {\n  const accurateCurrentTime = videoPlayer.value?.getCurrentVideoTime() || 0\n  for (let i = keyLog.value.length - 1; i >= 0; i--) {\n    const logEntry = keyLog.value[i]\n    if (logEntry.keydownTime >= accurateCurrentTime) break\n\n    if (logEntry.lane === lane) {\n      if (logEntry.keyupTime === null) {\n        logEntry.keyupTime = accurateCurrentTime\n        return true\n      }\n      break\n    }\n  }\n  return false\n}\n\nfunction closeAllKeylog () {\n  for (const keyEntry of keyLog.value) {\n    if (keyEntry.keyupTime === null) {\n      keyEntry.keyupTime = keyEntry.keydownTime\n    }\n  }\n}\n\nonKeyDown((key, ev) => {\n  if (props.suppressInput) return false\n\n  if (key.startsWith('escape_')) {\n    if (ev.ctrlKey) {\n      clearKeyLog()\n      return true\n    }\n  } else if (key.startsWith('f1_')) {\n    gotoPrevBookmark()\n    return true\n  } else if (key.startsWith('f2_')) {\n    toggleBookmark()\n    return true\n  } else if (key.startsWith('f3_')) {\n    gotoNextBookmark()\n    return true\n  } else if (key.startsWith('arrowleft_')) {\n    currentTime.value -= 2\n  } else if (key.startsWith('arrowright_')) {\n    currentTime.value += 2\n  } else if (key.startsWith('arrowup_')) {\n    playbackRate.value += 0.05\n  } else if (key.startsWith('arrowdown_')) {\n    playbackRate.value -= 0.05\n  }\n\n  const laneKeyMap = keyMapPrefIO.get()[props.videoProps.keyCount]\n  const lane = laneKeyMap[key]\n\n  if (lane !== undefined) {\n    addKey(lane)\n    return true\n  }\n  return false\n})\n\nonKeyUp(key => {\n  if (props.suppressInput) return false\n\n  const laneKeyMap = keyMapPrefIO.get()[props.videoProps.keyCount]\n  const lane = laneKeyMap[key]\n\n  if (lane !== undefined) {\n    addKeyUp(lane)\n    return true\n  }\n  return false\n})\n\n// //////////////////\n// Provide audioBuffer for scollbar\nconst audioBuffer = ref(null) as Ref<null | AudioBuffer>\nwatch(() => props.file, async () => {\n  audioBuffer.value = await getAudioBufferFromFile(props.file)\n  clearKeyLog()\n  bookmarkList.value.length = 0\n}, { immediate: true })\n\nfunction updateCurrentTimeWithPercent (playPercent: number) {\n  if (audioBuffer.value) {\n    currentTime.value = playPercent * audioBuffer.value.duration\n    closeAllKeylog()\n  }\n}\n\n// ///////////////////\n// 북마크 - 반복연습용\nconst bookmarkList = ref([] as number[])\nfunction gotoPrevBookmark () {\n  if (bookmarkList.value.length === 0) {\n    currentTime.value = 0\n    return\n  }\n\n  for (let i = 0; i < bookmarkList.value.length; i++) {\n    if (bookmarkList.value[i] > currentTime.value - 1.5) {\n      if (i === 0) currentTime.value = 0\n      else currentTime.value = bookmarkList.value[i - 1]\n      return\n    }\n  }\n\n  // goto last bookmark.\n  currentTime.value = bookmarkList.value[bookmarkList.value.length - 1]\n}\n\nfunction gotoNextBookmark () {\n  if (bookmarkList.value.length === 0) {\n    currentTime.value = audioBuffer.value?.duration || 0\n    return\n  }\n\n  for (let i = bookmarkList.value.length - 1; i >= 0; i--) {\n    if (bookmarkList.value[i] < currentTime.value) {\n      if (i === bookmarkList.value.length - 1) currentTime.value = audioBuffer.value?.duration || 0\n      else currentTime.value = bookmarkList.value[i + 1]\n      return\n    }\n  }\n\n  currentTime.value = bookmarkList.value[0]\n}\n\nfunction toggleBookmark () {\n  if (bookmarkList.value.length === 0) {\n    bookmarkList.value.push(currentTime.value)\n    return\n  }\n\n  const searchMin = currentTime.value - 1.5\n  const searchMax = currentTime.value + 1.5\n  const index = bookmarkList.value.findIndex(x => x <= searchMax && x >= searchMin)\n  if (index !== -1) {\n    bookmarkList.value.splice(index, 1)\n    return\n  }\n\n  bookmarkList.value.push(currentTime.value)\n  bookmarkList.value.sort((a, b) => a - b)\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(VideoPlayer, {\n      ref_key: \"videoPlayer\",\n      ref: videoPlayer,\n      class: \"video-player\",\n      src: _unref(videoUrl),\n      videoProps: __props.videoProps,\n      keyLog: _unref(keyLog),\n      currentTime: currentTime.value,\n      \"onUpdate:currentTime\": _cache[0] || (_cache[0] = ($event: any) => ((currentTime).value = $event)),\n      playbackRate: playbackRate.value\n    }, null, 8, [\"src\", \"videoProps\", \"keyLog\", \"currentTime\", \"playbackRate\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"button\", {\n        onClick: clearKeyLog,\n        title: \"Ctrl+ESC\"\n      }, \"Clear\"),\n      _hoisted_3,\n      _createElementVNode(\"span\", null, [\n        _createTextVNode(\" 배속  \"),\n        _createVNode(NumberSpinner, {\n          modelValue: playbackRate.value,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((playbackRate).value = $event)),\n          step: 0.05,\n          \"decimal-precision\": 2\n        }, null, 8, [\"modelValue\", \"step\"])\n      ]),\n      _hoisted_4,\n      _createElementVNode(\"button\", {\n        onClick: gotoPrevBookmark,\n        title: \"F1\"\n      }, \"이전 북마크로\"),\n      _createElementVNode(\"button\", {\n        onClick: toggleBookmark,\n        title: \"F2\"\n      }, \"위치 저장/취소\"),\n      _createElementVNode(\"button\", {\n        onClick: gotoNextBookmark,\n        title: \"F3\"\n      }, \"다음 북마크로\")\n    ]),\n    (_unref(audioBuffer))\n      ? (_openBlock(), _createBlock(AudioScrollbar, {\n          key: 0,\n          class: \"music-scroll\",\n          \"audio-buffer\": _unref(audioBuffer),\n          playPercent: currentTime.value / _unref(audioBuffer).duration,\n          \"mark-list\": bookmarkList.value.map(x => x / _unref(audioBuffer)!.duration),\n          \"onUpdate:playPercent\": updateCurrentTimeWithPercent\n        }, null, 8, [\"audio-buffer\", \"playPercent\", \"mark-list\"]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","import script from \"./TrainerView.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TrainerView.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TrainerView.vue?vue&type=style&index=0&id=47ef0751&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { merge } from 'lodash-es'\n\nexport interface VideoProps {\n  keyCount: number\n  noteSize: {\n    w: number\n    h: number\n  }\n  noteSpeedMultiplier: number\n  judgementLinePos : {\n    x: number,\n    y: number\n  }\n  audioSync: number\n}\n\nexport function createDefaultVideoProps (keyCount: number): VideoProps {\n  let noteSizeW = 0.26042\n  switch (keyCount) {\n    case 4: noteSizeW /= 4; break\n    case 5: noteSizeW /= 5; break\n    case 6: case 8: noteSizeW /= 6; break\n    default: throw new Error('Bad keyCount')\n  }\n  return {\n    keyCount,\n    noteSize: { w: noteSizeW, h: 0.02407 },\n    noteSpeedMultiplier: 5.4,\n    judgementLinePos: {\n      x: 0.36875,\n      y: 0.6963\n    },\n    audioSync: 0\n  }\n}\n\nexport function loadFileVideoProps (filename: string): {\n  props: VideoProps,\n  isNew?: boolean\n} {\n  const s = localStorage.getItem('videoProps_' + filename)\n  if (s) {\n    const obj = JSON.parse(s) as VideoProps\n    return {\n      props: merge(\n        createDefaultVideoProps(obj.keyCount),\n        obj\n      )\n    }\n  } else {\n    const keyCount = Number(prompt('Key Count') || '6')\n    return {\n      props: createDefaultVideoProps(keyCount),\n      isNew: true\n    }\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"키 입력 세팅\", -1)\nconst _hoisted_3 = [\"disabled\"]\nconst _hoisted_4 = { key: 1 }\n\nimport { Lane } from '@/KeyLog'\nimport { onKeyDown } from '@/utils/onKeyDown'\nimport { keyMapPrefIO } from '@/pref/KeyConfig'\nimport { ref, watch } from 'vue'\n\ntype NameLanePair = { name: string, lane: Lane }\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'KeyConfigEditor',\n  props: {\n    keyCount: null\n  },\n  setup(__props: any) {\n\nconst props = __props as {\n  keyCount: number\n};\n\n\n\nconst templates: { [keyCount: number]: NameLanePair[]} = {\n  4: [\n    { name: 'Lane 1', lane: Lane.Lane1 },\n    { name: 'Lane 2', lane: Lane.Lane2 },\n    { name: 'Lane 3', lane: Lane.Lane3 },\n    { name: 'Lane 4', lane: Lane.Lane4 },\n    { name: 'Side L', lane: Lane.SideL },\n    { name: 'Side R', lane: Lane.SideR }\n  ],\n\n  5: [\n    { name: 'Lane 1', lane: Lane.Lane1 },\n    { name: 'Lane 2', lane: Lane.Lane2 },\n    { name: 'Lane 3 (L)', lane: Lane.Lane3 },\n    { name: 'Lane 3 (R)', lane: Lane.Lane3 },\n    { name: 'Lane 4', lane: Lane.Lane4 },\n    { name: 'Lane 5', lane: Lane.Lane5 },\n    { name: 'Side L', lane: Lane.SideL },\n    { name: 'Side R', lane: Lane.SideR }\n  ],\n\n  6: [\n    { name: 'Lane 1', lane: Lane.Lane1 },\n    { name: 'Lane 2', lane: Lane.Lane2 },\n    { name: 'Lane 3', lane: Lane.Lane3 },\n    { name: 'Lane 4', lane: Lane.Lane4 },\n    { name: 'Lane 5', lane: Lane.Lane5 },\n    { name: 'Lane 6', lane: Lane.Lane6 },\n    { name: 'Side L', lane: Lane.SideL },\n    { name: 'Side R', lane: Lane.SideR }\n  ],\n\n  8: [\n    { name: 'Lane 1', lane: Lane.Lane1 },\n    { name: 'Lane 2', lane: Lane.Lane2 },\n    { name: 'Lane 3', lane: Lane.Lane3 },\n    { name: 'Lane 4', lane: Lane.Lane4 },\n    { name: 'Lane 5', lane: Lane.Lane5 },\n    { name: 'Lane 6', lane: Lane.Lane6 },\n    { name: 'Side L', lane: Lane.SideL },\n    { name: 'Side R', lane: Lane.SideR },\n    { name: 'Trigger L', lane: Lane.TriggerL },\n    { name: 'Trigger R', lane: Lane.TriggerR }\n  ]\n}\n\nwatch(() => props.keyCount, () => {\n  index.value = 0\n})\n\nconst index = ref(0)\nconst showLaneKeyConfig = ref(false)\nconst keys = ref([] as string[])\n\nfunction showKeyConfig () {\n  index.value = 0\n  keys.value.length = 0\n  showLaneKeyConfig.value = true\n}\n\nfunction resetKeyConfig () {\n  if (confirm('4/5/6/8키 설정을 전부 초기화하시겠습니까?')) {\n    keyMapPrefIO.clear()\n  }\n}\n\nfunction cancel () {\n  showLaneKeyConfig.value = false\n}\n\nfunction ok () {\n  const currentTemplate = templates[props.keyCount]\n  if (index.value !== currentTemplate.length) {\n    alert('not all keys filled')\n    return\n  }\n\n  const result = {} as { [key: string]: Lane }\n  for (let i = 0; i < currentTemplate.length; i++) {\n    result[keys.value[i]] = currentTemplate[i].lane\n  }\n  keyMapPrefIO.get()[props.keyCount] = result\n  showLaneKeyConfig.value = false\n}\n\nonKeyDown(key => {\n  if (!showLaneKeyConfig.value) return false\n  if (index.value >= templates[props.keyCount].length) return false\n  keys.value[index.value++] = key\n  return true\n})\n\nreturn (_ctx: any,_cache: any) => {\n  return (showLaneKeyConfig.value)\n    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n        _hoisted_2,\n        _createElementVNode(\"ul\", null, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(templates[__props.keyCount].length, (_, i) => {\n            return (_openBlock(), _createElementBlock(\"li\", { key: i }, _toDisplayString(templates[__props.keyCount][i].name) + \": \" + _toDisplayString(keys.value[i] || '(unassigned)'), 1))\n          }), 128))\n        ]),\n        _createElementVNode(\"button\", { onClick: cancel }, \"Cancel\"),\n        _createElementVNode(\"button\", {\n          onClick: ok,\n          disabled: index.value < templates[__props.keyCount].length\n        }, \"OK\", 8, _hoisted_3)\n      ]))\n    : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n        _createElementVNode(\"button\", { onClick: showKeyConfig }, \"키 입력 설정\"),\n        _createElementVNode(\"button\", { onClick: resetKeyConfig }, \"키 입력 전체 재설정\")\n      ]))\n}\n}\n\n})","import script from \"./KeyConfigEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./KeyConfigEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, createTextVNode as _createTextVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, vShow as _vShow } from \"vue\"\n\nconst _hoisted_1 = { class: \"app-container\" }\nconst _hoisted_2 = { class: \"sidebar\" }\nconst _hoisted_3 = { class: \"file-select\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"file-icon\" }, [\n  /*#__PURE__*/_createElementVNode(\"i\", { class: \"fas fa-upload\" })\n], -1)\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"file-label\" }, \" 영상 선택 \", -1)\nconst _hoisted_6 = [\n  _hoisted_4,\n  _hoisted_5\n]\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1)\nconst _hoisted_8 = {\n  key: 0,\n  class: \"file-property\"\n}\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"곡 관련\", -1)\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"option\", { value: 4 }, \"4\", -1)\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"option\", { value: 5 }, \"5\", -1)\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"option\", { value: 6 }, \"6\", -1)\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"option\", { value: 8 }, \"8\", -1)\nconst _hoisted_14 = [\n  _hoisted_10,\n  _hoisted_11,\n  _hoisted_12,\n  _hoisted_13\n]\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"기어 위치\", -1)\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"오디오 싱크\", -1)\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"p\", null, [\n  /*#__PURE__*/_createElementVNode(\"i\", null, \"키보드나 오디오 지연시간이 클수록 +\")\n], -1)\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"h3\", null, \"세부 설정\", -1)\nconst _hoisted_19 = { key: 0 }\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1)\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1)\nconst _hoisted_22 = { class: \"main\" }\n\nimport { Ref, ref, watch } from 'vue'\n\nimport TrainerView from '@/trainerView/TrainerView.vue'\nimport NumberSpinner from '@/components/NumberSpinner.vue'\nimport { loadFileVideoProps, VideoProps } from '@/pref/VideoProps'\nimport { colorPrefIO, ColorKey } from '@/pref/ColorPref'\nimport KeyConfigEditor from './components/KeyConfigEditor.vue'\nimport { Compact } from '@ckpack/vue-color'\n\n// Test video settings\n// from https://www.youtube.com/watch?v=1qxsQDrVcDY\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\nconst videoProps: Ref<null | VideoProps> = ref(null)\nconst file = ref(null) as Ref<null | File>\nconst fileInput = ref(null) as Ref<null | HTMLInputElement>\nconst showSidebar = ref(false)\nconst showColorPrefs = ref(false)\nconst colorPref = colorPrefIO.get()\n\nfunction onSidebarClick () {\n  if (file.value === null) {\n    fileSelect()\n  } else {\n    showSidebar.value = !showSidebar.value\n  }\n}\n\nfunction fileSelect () {\n  fileInput.value?.click()\n}\n\nasync function onFileSelect (e: Event) {\n  const element = e.currentTarget as HTMLInputElement\n  const fileList: FileList | null = element.files\n  if (fileList) {\n    const v = document.createElement('video')\n    v.preload = 'metadata'\n    v.src = URL.createObjectURL(fileList[0])\n    v.addEventListener('loadedmetadata', () => {\n      file.value = fileList[0]\n\n      const { props, isNew } = loadFileVideoProps(file.value.name)\n      videoProps.value = props\n      if (isNew) showSidebar.value = true\n    })\n  }\n}\n\nfunction resetVideoProps () {\n  if (file.value) {\n    localStorage.removeItem('videoProps_' + file.value.name)\n    const v = document.createElement('video')\n    v.preload = 'metadata'\n    v.src = URL.createObjectURL(file.value)\n    v.addEventListener('loadedmetadata', () => {\n      const { props, isNew } = loadFileVideoProps(file.value!.name)\n      videoProps.value = props\n      if (isNew) showSidebar.value = true\n    })\n  } else {\n    alert('Load file first!')\n  }\n}\n\nwatch(videoProps, () => {\n  if (!file.value || !videoProps.value) return\n  localStorage.setItem('videoProps_' + file.value.name, JSON.stringify(videoProps.value))\n}, { deep: true })\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: \"mainlogo\",\n      onClick: onSidebarClick\n    }, \"DJM\"),\n    _withDirectives(_createElementVNode(\"aside\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"input\", {\n          ref_key: \"fileInput\",\n          ref: fileInput,\n          type: \"file\",\n          name: \"select\",\n          onChange: onFileSelect\n        }, null, 544),\n        _createElementVNode(\"button\", { onClick: fileSelect }, _hoisted_6)\n      ]),\n      _hoisted_7,\n      (_unref(file) && videoProps.value)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n            _createElementVNode(\"button\", { onClick: resetVideoProps }, \"Videoprops Reset\"),\n            _hoisted_9,\n            _createElementVNode(\"ul\", null, [\n              _createElementVNode(\"li\", null, _toDisplayString(_unref(file).name), 1),\n              _createElementVNode(\"li\", null, [\n                _createTextVNode(\"키 갯수: \"),\n                _withDirectives(_createElementVNode(\"select\", {\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((videoProps.value.keyCount) = $event))\n                }, _hoisted_14, 512), [\n                  [_vModelSelect, videoProps.value.keyCount]\n                ])\n              ]),\n              _createElementVNode(\"li\", null, [\n                _createTextVNode(\"배속: \"),\n                _createVNode(NumberSpinner, {\n                  modelValue: videoProps.value.noteSpeedMultiplier,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((videoProps.value.noteSpeedMultiplier) = $event)),\n                  step: 0.1\n                }, null, 8, [\"modelValue\", \"step\"])\n              ])\n            ]),\n            _hoisted_15,\n            _createElementVNode(\"div\", null, [\n              _createElementVNode(\"button\", {\n                onClick: _cache[2] || (_cache[2] = ($event: any) => (videoProps.value!.judgementLinePos.x = 0.037))\n              }, \"기어 왼쪽\"),\n              _createTextVNode(\"  \"),\n              _createElementVNode(\"button\", {\n                onClick: _cache[3] || (_cache[3] = ($event: any) => (videoProps.value!.judgementLinePos.x = 0.369))\n              }, \"기어 중앙\"),\n              _createTextVNode(\"  \"),\n              _createElementVNode(\"button\", {\n                onClick: _cache[4] || (_cache[4] = ($event: any) => (videoProps.value!.judgementLinePos.x = 0.701))\n              }, \"기어 오른쪽\")\n            ]),\n            _hoisted_16,\n            _hoisted_17,\n            _createVNode(NumberSpinner, {\n              modelValue: videoProps.value.audioSync,\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((videoProps.value.audioSync) = $event)),\n              step: 0.01,\n              \"decimal-precision\": 2\n            }, null, 8, [\"modelValue\", \"step\"]),\n            _hoisted_18,\n            _createElementVNode(\"ul\", null, [\n              _createElementVNode(\"li\", null, [\n                _createTextVNode(\" 노트 색상 설정 \"),\n                _createElementVNode(\"span\", {\n                  onClick: _cache[6] || (_cache[6] = ($event: any) => (showColorPrefs.value = !showColorPrefs.value))\n                }, _toDisplayString(showColorPrefs.value ? \"▲\" : \"▼\"), 1),\n                (showColorPrefs.value)\n                  ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_19, [\n                      _createElementVNode(\"li\", null, [\n                        _createTextVNode(\"숫자 노트 색상: \"),\n                        _createVNode(_unref(Compact), {\n                          modelValue: _unref(colorPref)[_unref(ColorKey).Number],\n                          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => (_unref(colorPref)[_unref(ColorKey).Number] = $event.rgba)),\n                          disableAlpha: true\n                        }, null, 8, [\"modelValue\"])\n                      ]),\n                      _createElementVNode(\"li\", null, [\n                        _createTextVNode(\"사이드 노트 색상: \"),\n                        _createVNode(_unref(Compact), {\n                          modelValue: _unref(colorPref)[_unref(ColorKey).Side],\n                          \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => (_unref(colorPref)[_unref(ColorKey).Side] = $event.rgba)),\n                          disableAlpha: true\n                        }, null, 8, [\"modelValue\"])\n                      ]),\n                      _createElementVNode(\"li\", null, [\n                        _createTextVNode(\"트리거 노트 색상: \"),\n                        _createVNode(_unref(Compact), {\n                          modelValue: _unref(colorPref)[_unref(ColorKey).Trigger],\n                          \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => (_unref(colorPref)[_unref(ColorKey).Trigger] = $event.rgba)),\n                          disableAlpha: true\n                        }, null, 8, [\"modelValue\"])\n                      ])\n                    ]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _hoisted_20,\n              _createElementVNode(\"li\", null, [\n                _createTextVNode(\"판정선 X: \"),\n                _createVNode(NumberSpinner, {\n                  modelValue: videoProps.value.judgementLinePos.x,\n                  \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((videoProps.value.judgementLinePos.x) = $event)),\n                  step: 0.001,\n                  \"decimal-precision\": 3\n                }, null, 8, [\"modelValue\", \"step\"])\n              ]),\n              _createElementVNode(\"li\", null, [\n                _createTextVNode(\"판정선 Y: \"),\n                _createVNode(NumberSpinner, {\n                  modelValue: videoProps.value.judgementLinePos.y,\n                  \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((videoProps.value.judgementLinePos.y) = $event)),\n                  step: 0.001,\n                  \"decimal-precision\": 3\n                }, null, 8, [\"modelValue\", \"step\"])\n              ]),\n              _createElementVNode(\"li\", null, [\n                _createTextVNode(\"노트 Width: \"),\n                _createVNode(NumberSpinner, {\n                  modelValue: videoProps.value.noteSize.w,\n                  \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => ((videoProps.value.noteSize.w) = $event)),\n                  step: 0.0001,\n                  \"decimal-precision\": 4\n                }, null, 8, [\"modelValue\", \"step\"])\n              ]),\n              _createElementVNode(\"li\", null, [\n                _createTextVNode(\"노트 Height: \"),\n                _createVNode(NumberSpinner, {\n                  modelValue: videoProps.value.noteSize.h,\n                  \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((videoProps.value.noteSize.h) = $event)),\n                  step: 0.0001,\n                  \"decimal-precision\": 4\n                }, null, 8, [\"modelValue\", \"step\"])\n              ])\n            ])\n          ]))\n        : _createCommentVNode(\"\", true),\n      _hoisted_21,\n      (videoProps.value)\n        ? (_openBlock(), _createBlock(KeyConfigEditor, {\n            key: 1,\n            \"key-count\": videoProps.value.keyCount\n          }, null, 8, [\"key-count\"]))\n        : _createCommentVNode(\"\", true)\n    ], 512), [\n      [_vShow, showSidebar.value]\n    ]),\n    _createElementVNode(\"div\", _hoisted_22, [\n      (_unref(file) && videoProps.value)\n        ? (_openBlock(), _createBlock(TrainerView, {\n            key: 0,\n            file: _unref(file),\n            videoProps: videoProps.value\n          }, null, 8, [\"file\", \"videoProps\"]))\n        : _createCommentVNode(\"\", true)\n    ])\n  ]))\n}\n}\n\n})","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1d178e53&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport './style.scss'\n\ncreateApp(App)\n  .mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkdjmax_trainer\"] = self[\"webpackChunkdjmax_trainer\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(4270); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["Lane","registerResizeWatcher","elementRef","handler","ro","ref","onResize","onMounted","ob","ResizeObserver","observe","value","onBeforeUnmount","unobserve","ioKeySet","Set","PrefIO","constructor","prefKey","defaultConstructor","this","pref","_load","watch","v","localStorage","setItem","JSON","stringify","deep","has","Error","add","getItem","defaultValue","call","merge","parse","get","clear","removeItem","set","newPref","console","log","ColorKey","defaultColorPref","Number","Trigger","Side","colorPrefIO","updateNoteOverlayCanvas","videoElement","targetCanvas","videoProps_","keyLog_","videoProps","toRaw","keyLog","ctx","getContext","width","height","currentTime","audioSync","judgementLinePos","noteSize","yPerSecond","noteSpeedMultiplier","perfectRange","perfectY","clearRect","noteRegionWidth","w","oldTransform","getTransform","setTransform","scale","fillStyle","rect","x","fill","strokeStyle","lineWidth","beginPath","moveTo","lineTo","y","stroke","colorPref","keyEntry","rectW","sideNoteW","keyCount","keydownY","h","keydownTime","keyupY","keyupTime","lane","SideL","SideR","TriggerL","TriggerR","noteColorString","rectX","Lane1","Lane2","Lane3","Lane4","Lane5","Lane6","noteColorRGB","tinycolor","toRgb","r","g","b","closePath","trailW","crossPlatformRequestVideoFrameCallback","videoEl","cb","requestVideoFrameCallback","requestAnimationFrame","crossPlatformCancelVideoFrameCallback","reqId","cancelVideoFrameCallback","cancelAnimationFrame","_hoisted_1","_defineComponent","__name","props","src","playbackRate","emits","setup","__props","expose","emit","root","video","overlayCanvas","resizeCanvas","readyState","canvas","videoWidth","videoHeight","getClientRects","properZoom","Math","min","properWidth","properHeight","style","vrcb","onVideoFrame","pause","immediate","playbackStartTime","Date","now","newValue","newPlaybackStartTime","abs","play","adjustPlayStartTime","updateCurrentTime","paused","getCurrentVideoTime","onUnmounted","_ctx","_cache","_openBlock","_createElementBlock","ref_key","class","_createElementVNode","onTimeupdate","onLoadedmetadata","__exports__","audioBuffer","playPercent","markList","toRefs","waveformCanvas","renderCanvas","channel0","getChannelData","length","scrollWidth","scrollHeight","imageData","createImageData","data","startIndex","endIndex","intervalSamples","slice","maxSample","minSample","sample","intervalLength","q1Index","quickselect","q1Sample","q3Index","q3Sample","maxSampleY","minSampleY","iy","index","q3SampleY","q1SampleY","putImageData","rerenderWatcher","computed","renderOverlay","renderVerticalBar","xPercent","color","mark","onClick","event","offsetX","_hoisted_2","modelValue","step","decimalPrecision","field","multiplier","updateValue","onKeyDown","ev","key","startsWith","stopPropagation","selStart","max","selectionStart","periodPos","indexOf","pow","preventDefault","nextTick","setSelectionRange","floor","$event","toFixed","onKeydown","onChange","e","target","audioCtx","window","AudioContext","webkitAudioContext","readFileArrayBuffer","file","Promise","resolve","reader","FileReader","onload","arrayBuffer","result","readAsArrayBuffer","async","getAudioBufferFromFile","decodedAudioData","decodeAudioData","defaultKeyMap","a_0","s_0","shift_1","shift_2","d_0","l_0","c_0","keyMapPrefIO","document","addEventListener","listener","removeEventListener","lastRetCache","keyString","location","ret","repeat","toLowerCase","onKeyUp","_hoisted_3","_hoisted_4","suppressInput","type","Boolean","videoUrl","URL","createObjectURL","videoPlayer","clearKeyLog","addKey","accurateCurrentTime","push","addKeyUp","i","logEntry","closeAllKeylog","ctrlKey","gotoPrevBookmark","toggleBookmark","gotoNextBookmark","laneKeyMap","undefined","updateCurrentTimeWithPercent","duration","bookmarkList","searchMin","searchMax","findIndex","sort","a","splice","_createVNode","VideoPlayer","_unref","title","_createTextVNode","NumberSpinner","_createBlock","AudioScrollbar","map","_createCommentVNode","createDefaultVideoProps","noteSizeW","loadFileVideoProps","filename","s","obj","prompt","isNew","templates","name","showLaneKeyConfig","keys","showKeyConfig","resetKeyConfig","confirm","cancel","ok","currentTemplate","alert","_Fragment","_renderList","_","_toDisplayString","disabled","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","fileInput","showSidebar","showColorPrefs","onSidebarClick","fileSelect","click","onFileSelect","element","currentTarget","fileList","files","createElement","preload","resetVideoProps","_withDirectives","_vModelSelect","Compact","rgba","disableAlpha","KeyConfigEditor","_vShow","TrainerView","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","Object","every","n","getter","__esModule","d","definition","o","defineProperty","enumerable","globalThis","Function","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}